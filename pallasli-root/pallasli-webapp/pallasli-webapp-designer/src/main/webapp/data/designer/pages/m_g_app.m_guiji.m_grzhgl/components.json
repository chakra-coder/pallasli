{
	"f_panels":[{
		"f_key":"m_g_app.m_guiji.m_grzhgl.grid",
		"f_xtype":"p_grid",
		"f_modelName":"Knowledge",	
		"f_buttons":[{
				                text: '增加',
				                handler: "function(){
			                	
				                }"
				            },{
				                text: '修改',
				                handler: "function(btn,e){	
				                	var records=knowledgePanel.getSelectionModel().getSelection();
				                	var recordData={};
				                	if(records.length>0){
					                	  recordData=records[0].data;
				                	}else{
				                		return;
				                	}

				        			var menuTypeCombobox=Ext.create('Ext.form.ComboBox', {
				        			    fieldLabel: '菜单分类',
				        			    name:'menuTypeCode',
				        			    store: menuTypeStore,
				        			    value:recordData.menuTypeCode,
				        			    queryMode: 'remote',
				        			    displayField: 'menuTypeCaption',
				        			    valueField: 'menuTypeCode',
				        			    anchor:'100%'
				        			});
				        			var pageTypeCombobox=Ext.create('Ext.form.ComboBox', {
				        			    fieldLabel: '页面分类',
				        			    name:'pageTypeCode',
				        			    store: pageTypeStore,
				        			    value:recordData.pageTypeCode,
				        			    queryMode: 'remote',
				        			    displayField: 'pageTypeCaption',
				        			    valueField: 'pageTypeCode',
				        			    anchor:'100%'
				        			});
				        			var menuCombobox=Ext.create('Ext.form.ComboBox', {
				        			    fieldLabel: '父菜单',
				        			    name:'parentKey',
				        			    store: menuStore,
				        			    value:recordData.parentKey,
				        			    queryMode: 'remote',
				        			    displayField: 'menuCaption',
				        			    valueField: 'menuKey',
				        			    anchor:'100%'
				        			});
				                	 var form_addType=Ext.create('Ext.form.Panel',{
				                          border: false,
				                          fieldDefaults: {
				                              labelWidth: 100
				                          },
				                          defaultType: 'textfield',
				                          bodyPadding: 5,
				                          floatable: false,
				                          items:[
						                          	{xtype:'hidden',name:'id',value:recordData.id,anchor:'100%'},
						                          	{fieldLabel:'关键字',name:'menuKey',value:recordData.menuKey,anchor:'100%'},
						                          	{fieldLabel:'英文名',name:'menuName',value:recordData.menuName,anchor:'100%'},
						                          	{fieldLabel:'中文名',name:'menuCaption',value:recordData.menuCaption,anchor:'100%'},
						                          	menuTypeCombobox,pageTypeCombobox,menuCombobox , 
						                          	{fieldLabel:'表名',name:'menuTableName',value:recordData.menuTableName,anchor:'100%'},
						                          	{fieldLabel:'查询条件',name:'menuWhereSql',value:recordData.menuWhereSql,anchor:'100%'},
						                          	{fieldLabel:'页面路径',name:'urlPath',value:recordData.urlPath,anchor:'100%'},
						                          	{fieldLabel:'child页面路径',name:'childUrlPath',value:recordData.childUrlPath,anchor:'100%'},
						                          	{fieldLabel:'配置项',xtype:'textarea',name:'menuConfig',anchor:'100%'}                          
				                          ],
				                          bbar:['->',{
				                        	  text:'保存',handler:function(){
				                        		 var formValues=form_addType.getForm().getValues(); 
				                        		 
				                        		 var rec=new Knowledge({  
					 				            	    id : formValues['id'], 
					 				            	    menuKey : formValues['menuKey'], 
					 				            	    menuName : formValues['menuName'], 
					 				            	    menuCaption : formValues['menuCaption'], 
					 				            	    urlPath : formValues['urlPath'], 
					 				            	    childUrlPath : formValues['childUrlPath'], 
					 				            	    menuTypeCode : formValues['menuTypeCode'], 
					 				            	    menuWhereSql : formValues['menuWhereSql'], 
					 				            	    menuTableName : formValues['menuTableName'], 
					 				            	    pageTypeCode : formValues['pageTypeCode'], 
					 				            	    menuConfig : formValues['menuConfig'],
					 				            	    parentKey :formValues['parentKey'] 
				 				            	});  
				 				            	rec.save({ 
				 				            	    success:function(rec,opt){  
				 				            	       gridstore.reload();
				 				            	    },  
				 				            	    failure:function(e,op){  
				 				            	        Ext.Msg.alert('发生错误',op.error);  
				 				            	    },  
				 				            	    scope:knowledgePanel  
				 				            	}); 
				                        	  }
				                          }]
				                      
					                 });   
					            	 var win = Ext.create('widget.window', {
					                      title: '增加节点',
					                      closable: true,
					                      closeAction: 'hide',
					                      width: 600,
					                      minWidth: 350,
					                      height: 350,
					                      modal: true,
					                      layout: {
					                          type: 'fit',
					                          padding: 5
					                      },
					                      items: [form_addType]
					                  });
					            	 win.show();
			                	
				                
								}"
				            },{
				                text: '删除',
				                handler: "function(btn,e){	
				                	var records=knowledgePanel.getSelectionModel().getSelection();

				                	if(records.length>0){
					                	var recordData=records[0].data;
					                	Ext.Msg.show({
					                	     title:'是否删除?',
					                	     msg: '你确定要删除'+recordData.caption+'吗?',
					                	     buttons: Ext.Msg.YESNOCANCEL,
					                	     icon: Ext.Msg.QUESTION,
					                	     fn:function(btn){
													if(btn=='yes'){
								                	MenuAction.deleteMenu(recordData,function(result){
								                		knowledgePanel.getStore().removeAll();
							                			knowledgePanel.getStore().reload();
								                	}); 
													}
					                	     }
					                	});
				                	}
				                }"
				            }],
		"f_api": {  
			"read": MenuAction.loadMenus,  
			"create": MenuAction.saveMenu,  
			"update": MenuAction.saveMenu
		},
		"f_columns":[{
				"dataIndex":"id",
				"hidden":true
			},{
				"dataIndex":"menuName",
				"text":"英文名",
				"flex":2,
				"align":"left"
			},{
				"dataIndex":"menuCaption",
				"text":"中文名",
				"flex":2,
				"align":"left"
			},{
				"dataIndex":"menuTypeCode",
				"text":"菜单类型",
				"flex":3,
				"align":"left" 
			},{
				"dataIndex":"pageTypeCode",
				"text":"页面类型",
				"flex":3,
				"align":"left" 
			},{
				"dataIndex":"parentKey",
				"text":"上级菜单",
				"flex":3,
				"align":"left"  ,
				"field": {
					xtype: 'combo',
					store: menuStore,
					queryMode: 'remote',
					displayField: 'menuCaption',
					valueField: 'id'
				}
			},{
				"dataIndex":"urlPath",
				"text":"页面路径",
				"flex":3,
				"align":"left"   
			},{
				"dataIndex":"childUrlPath",
				"text":"child页面路径",
				"flex":3,
				"align":"left"   
			},{
				"dataIndex":"parentKey",
				"hidden":true 
			}]		
	}],	
	"f_components":[
		{"f_key":"","f_fieldlabel":"","f_xtype":"","f_defaultValue":""},
		{"f_key":"","f_fieldlabel":"","f_xtype":"","f_defaultValue":""},
		{"f_key":"","f_fieldlabel":"","f_xtype":"","f_defaultValue":""},
		{"f_key":"","f_fieldlabel":"","f_xtype":"","f_defaultValue":""},
		{"f_key":"","f_fieldlabel":"","f_xtype":"","f_defaultValue":""},
		{"f_key":"","f_fieldlabel":"","f_xtype":"","f_defaultValue":""},
		{"f_key":"","f_fieldlabel":"","f_xtype":"","f_defaultValue":""},
		{"f_key":"","f_fieldlabel":"","f_xtype":"","f_defaultValue":""}
	],
	"f_customscripts":""
}