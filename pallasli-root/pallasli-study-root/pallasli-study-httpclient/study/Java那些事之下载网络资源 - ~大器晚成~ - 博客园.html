<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Java那些事之下载网络资源 - ~大器晚成~ - 博客园</title>
<link type="text/css" rel="stylesheet" href="/bundles/blog-common.css?v=xCq7zOzG7ffmeoIZ8ptO6h_XQZKuhaCdCqXw425T8aQ1"/>
<link id="MainCss" type="text/css" rel="stylesheet" href="/skins/InsideDotNet/bundle-InsideDotNet.css?v=e2PrQOS6ehXuI4fFoHdI-uLJzxknMZq1JZj4OksJabo1"/>
<link title="RSS" type="application/rss+xml" rel="alternate" href="http://www.cnblogs.com/luchen927/rss"/>
<link title="RSD" type="application/rsd+xml" rel="EditURI" href="http://www.cnblogs.com/luchen927/rsd.xml"/>
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="http://www.cnblogs.com/luchen927/wlwmanifest.xml"/>
<script src="http://common.cnblogs.com/script/jquery.js" type="text/javascript"></script>  
<script type="text/javascript">var currentBlogApp = 'luchen927', cb_enable_mathjax=false;</script>
<script src="/bundles/blog-common.js?v=vfyaOatuLMyj5RwdSGYAF5dymrCScyt2dbQ1pH4gldc1" type="text/javascript"></script>
</head>
<body>
<a name="top"></a>

<!--done-->
<div id="home">
<div id="header">
	<div id="blogTitle">
	<div style="display:none"><img src="/Skins/insideDotNet/images/top.gif" alt="谨以此模板祝贺【博客园开发者征途】系列图书《你必须知道的.net》出版发行" /></div>
	<a id="lnkBlogLogo" href="http://www.cnblogs.com/luchen927/"><img id="blogLogo" src="/Skins/custom/images/logo.gif" alt="返回主页" /></a>			
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle" href="http://www.cnblogs.com/luchen927/">与你分享</a></h1>
<h2>让分享融入生活</h2>



		
	</div><!--end: blogTitle 博客的标题和副标题 -->
	<div id="navigator">
		
<ul id="navList">
    <li></li>
    <li><a id="MyLinks1_SpaceLink" class="menu" href="http://ing.cnblogs.com/">闪存</a></li>
    <li></li>
    <li></li>
    <li><a id="MyLinks1_ContactLink" accesskey="9" class="menu" rel="nofollow" href="http://msg.cnblogs.com/send/~%E5%A4%A7%E5%99%A8%E6%99%9A%E6%88%90~">联系</a></li>
    <li><a id="MyLinks1_Admin" class="menu" rel="nofollow" href="http://i.cnblogs.com/">管理</a></li>
    <li><a id="MyLinks1_Syndication" class="menu" href="http://www.cnblogs.com/luchen927/rss">订阅</a>
        <a id="MyLinks1_XMLLink" class="aHeaderXML" href="http://www.cnblogs.com/luchen927/rss"><img src="http://www.cnblogs.com/images/xml.gif" alt="订阅" /></a></li>
</ul>


		<div class="clear"></div>
		<div class="blogStats">
			
			
<!--done-->
随笔- 64&nbsp;
文章- 10&nbsp;
评论- 346&nbsp;

			
		</div><!--end: blogStats -->
	</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->

<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		
<div id="post_detail">
<!--done-->
<div id="topics">
	<div class = "post">
		<h1 class = "postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/luchen927/archive/2011/07/04/2094096.html">Java那些事之下载网络资源</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body"><p>废话不多说，今天为大家带来java中下载网络资源的方法。</p>
<p>Java中的下载，通常是使用HttpURLConnection类，这个类的功能也很强大，接下来让我们看看如何使用这个类吧~</p>
<p>首先先介绍一下，本文讲到的下载资源分为两种：html源代码以及网络上的资源文件，他们的下载方式还是有一点区别的。</p>
<p>1 下载html源代码</p>
<p>首先说一下URL请求的两种方式：Get和Post</p>
<p>Post与Get的不同之处在于post的参数不是放在URL字串里面，而是放在http请求的正文内。</p>
<p>下图为本人使用firebug查看某网站post请求的截图</p>
<p>&nbsp;</p>
<div><img src="data:image/png;base64,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" alt="" /></div>
<p>从中可以看到，post参数包含5部分，拼接成字符串后为<code>q=%E4%B8%AD%E6%96%87&amp;t=dict&amp;ut=default&amp;ulang=ZH-CN&amp;tlang=EN-US。该串就是要放在http请求正文内，准备发送给服务器进行请求的post信息。</code></p>
<p>&nbsp;</p>
<p>&nbsp;下面进入正题：</p>
<p>Url的请求连接(Get方式)</p>
<div class="cnblogs_code">
<div><span style="color: #008080;">&nbsp;1</span>&nbsp;<span style="color: #000000;">URL&nbsp;url&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">new</span><span style="color: #000000;">&nbsp;URL(currentUrl);<br /></span><span style="color: #008080;">&nbsp;2</span>&nbsp;<span style="color: #000000;">connection&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;getValidConnection();<br /></span><span style="color: #008080;">&nbsp;3</span>&nbsp;<span style="color: #000000;"><br /></span><span style="color: #008080;">&nbsp;4</span>&nbsp;<span style="color: #008000;">/**</span><span style="color: #008000;"><br /></span><span style="color: #008080;">&nbsp;5</span>&nbsp;<span style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Validate&nbsp;the&nbsp;if&nbsp;the&nbsp;connection&nbsp;is&nbsp;OK...<br /></span><span style="color: #008080;">&nbsp;6</span>&nbsp;<span style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br /></span><span style="color: #008080;">&nbsp;7</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">private</span><span style="color: #000000;">&nbsp;HttpURLConnection&nbsp;getValidConnection()<br /></span><span style="color: #008080;">&nbsp;8</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br /></span><span style="color: #008080;">&nbsp;9</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br /></span><span style="color: #008080;">10</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpURLConnection&nbsp;httpurlconnection&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">null</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">11</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br /></span><span style="color: #008080;">12</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">try</span><span style="color: #000000;">&nbsp;<br /></span><span style="color: #008080;">13</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br /></span><span style="color: #008080;">14</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;urlconnection&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;pageUrl.openConnection();<br /></span><span style="color: #008080;">15</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br /></span><span style="color: #008080;">16</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span style="color: #000000;">&nbsp;(</span><span style="color: #000000;">!</span><span style="color: #000000;">(urlconnection&nbsp;</span><span style="color: #0000ff;">instanceof</span><span style="color: #000000;">&nbsp;HttpURLConnection))<br /></span><span style="color: #008080;">17</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br /></span><span style="color: #008080;">18</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">null</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">19</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /></span><span style="color: #008080;">20</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;httpurlconnection&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;(HttpURLConnection)&nbsp;urlconnection;<br /></span><span style="color: #008080;">21</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;httpurlconnection.setRequestProperty(</span><span style="color: #000000;">"</span><span style="color: #000000;">User-Agent</span><span style="color: #000000;">"</span><span style="color: #000000;">,CommonValues.User_Agent);<br /></span><span style="color: #008080;">22</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;httpurlconnection.setRequestProperty(</span><span style="color: #000000;">"</span><span style="color: #000000;">Accept</span><span style="color: #000000;">"</span><span style="color: #000000;">,CommonValues.Accept);<br /></span><span style="color: #008080;">23</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;httpurlconnection.setRequestProperty(</span><span style="color: #000000;">"</span><span style="color: #000000;">Accept-Charset</span><span style="color: #000000;">"</span><span style="color: #000000;">,CommonValues.Accept_Charset);<br /></span><span style="color: #008080;">24</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;httpurlconnection.setRequestProperty(</span><span style="color: #000000;">"</span><span style="color: #000000;">Accept-Language</span><span style="color: #000000;">"</span><span style="color: #000000;">,CommonValues.Accept_Language);<br /></span><span style="color: #008080;">25</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;httpurlconnection.setRequestProperty(</span><span style="color: #000000;">"</span><span style="color: #000000;">Connection</span><span style="color: #000000;">"</span><span style="color: #000000;">,CommonValues.Connection);<br /></span><span style="color: #008080;">26</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;httpurlconnection.setRequestProperty(</span><span style="color: #000000;">"</span><span style="color: #000000;">Keep-Alive</span><span style="color: #000000;">"</span><span style="color: #000000;">,CommonValues.Keep_Alive);<br /></span><span style="color: #008080;">27</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;httpurlconnection.setConnectTimeout(CommonValues.ConnectionTimeOut);<br /></span><span style="color: #008080;">28</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;httpurlconnection.setReadTimeout(CommonValues.ReadTimeOut);<br /></span><span style="color: #008080;">29</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br /></span><span style="color: #008080;">30</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;httpurlconnection.connect();<br /></span><span style="color: #008080;">31</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br /></span><span style="color: #008080;">32</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span style="color: #000000;">&nbsp;responsecode&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;httpurlconnection.getResponseCode();<br /></span><span style="color: #008080;">33</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br /></span><span style="color: #008080;">34</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">switch</span><span style="color: #000000;">&nbsp;(responsecode)&nbsp;<br /></span><span style="color: #008080;">35</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br /></span><span style="color: #008080;">36</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000;">//</span><span style="color: #008000;">&nbsp;here&nbsp;valid&nbsp;codes!</span><span style="color: #008000;"><br /></span><span style="color: #008080;">37</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">case</span><span style="color: #000000;">&nbsp;HttpURLConnection.HTTP_OK:<br /></span><span style="color: #008080;">38</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">39</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">default</span><span style="color: #000000;">:<br /></span><span style="color: #008080;">40</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;httpurlconnection.disconnect();<br /></span><span style="color: #008080;">41</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">null</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">42</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /></span><span style="color: #008080;">43</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<br /></span><span style="color: #008080;">44</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">catch</span><span style="color: #000000;">&nbsp;(IOException&nbsp;ioexception)&nbsp;<br /></span><span style="color: #008080;">45</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br /></span><span style="color: #008080;">46</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br /></span><span style="color: #008080;">47</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span style="color: #000000;">&nbsp;(httpurlconnection&nbsp;</span><span style="color: #000000;">!=</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">null</span><span style="color: #000000;">)&nbsp;<br /></span><span style="color: #008080;">48</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br /></span><span style="color: #008080;">49</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;httpurlconnection.disconnect();<br /></span><span style="color: #008080;">50</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /></span><span style="color: #008080;">51</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">null</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">52</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /></span><span style="color: #008080;">53</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br /></span><span style="color: #008080;">54</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span style="color: #000000;">&nbsp;httpurlconnection;<br /></span><span style="color: #008080;">55</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div>
</div>
<p>&nbsp;Post方式,只需要在上面Get方法的connect()之前<span style="color: #000000;">setRequestMethod并写入相应请求即可。</span></p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<div><span style="color: #008080;">&nbsp;1</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;httpurlconnection.setRequestMethod(</span><span style="color: #000000;">"</span><span style="color: #000000;">POST</span><span style="color: #000000;">"</span><span style="color: #000000;">);<br /></span><span style="color: #008080;">&nbsp;2</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;httpurlconnection.setDoInput(</span><span style="color: #0000ff;">true</span><span style="color: #000000;">);<br /></span><span style="color: #008080;">&nbsp;3</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;httpurlconnection.setDoOutput(</span><span style="color: #0000ff;">true</span><span style="color: #000000;">);<br /></span><span style="color: #008080;">&nbsp;4</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StringBuilder&nbsp;sb&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">new</span><span style="color: #000000;">&nbsp;StringBuilder();&nbsp;&nbsp;&nbsp;&nbsp;<br /></span><span style="color: #008080;">&nbsp;5</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sb.append(</span><span style="color: #000000;">"</span><span style="color: #000000;">q=</span><span style="color: #000000;">"</span><span style="color: #000000;">+</span><span style="color: #000000;">keyWord);<br /></span><span style="color: #008080;">&nbsp;6</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sb.append(</span><span style="color: #000000;">"</span><span style="color: #000000;">&amp;t=para</span><span style="color: #000000;">"</span><span style="color: #000000;">);<br /></span><span style="color: #008080;">&nbsp;7</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sb.append(</span><span style="color: #000000;">"</span><span style="color: #000000;">&amp;ut=sent</span><span style="color: #000000;">"</span><span style="color: #000000;">);<br /></span><span style="color: #008080;">&nbsp;8</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sb.append(</span><span style="color: #000000;">"</span><span style="color: #000000;">&amp;sc=all</span><span style="color: #000000;">"</span><span style="color: #000000;">);<br /></span><span style="color: #008080;">&nbsp;9</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sb.append(</span><span style="color: #000000;">"</span><span style="color: #000000;">&amp;ss=all</span><span style="color: #000000;">"</span><span style="color: #000000;">);<br /></span><span style="color: #008080;">10</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sb.append(</span><span style="color: #000000;">"</span><span style="color: #000000;">&amp;sd=all</span><span style="color: #000000;">"</span><span style="color: #000000;">);<br /></span><span style="color: #008080;">11</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sb.append(</span><span style="color: #000000;">"</span><span style="color: #000000;">&amp;ofst=</span><span style="color: #000000;">"</span><span style="color: #000000;">+</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.pageCount</span><span style="color: #000000;">*</span><span style="color: #000000;">10</span><span style="color: #000000;">&nbsp;);<br /></span><span style="color: #008080;">12</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sb.append(</span><span style="color: #000000;">"</span><span style="color: #000000;">&amp;tlang=EN-US</span><span style="color: #000000;">"</span><span style="color: #000000;">);<br /></span><span style="color: #008080;">13</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sb.append(</span><span style="color: #000000;">"</span><span style="color: #000000;">&amp;ulang=ZH-CN</span><span style="color: #000000;">"</span><span style="color: #000000;">);<br /></span><span style="color: #008080;">14</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000;">//</span><span style="color: #008000;">post信息</span><span style="color: #008000;"><br /></span><span style="color: #008080;">15</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OutputStream&nbsp;os&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;httpurlconnection.getOutputStream();<br /></span><span style="color: #008080;">16</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OutputStreamWriter&nbsp;out&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">new</span><span style="color: #000000;">&nbsp;OutputStreamWriter(os);<br /></span><span style="color: #008080;">17</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out.write(sb.toString());<br /></span><span style="color: #008080;">18</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out.close();&nbsp;<br /></span><span style="color: #008080;">19</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /></span><span style="color: #008080;">20</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /></span></div>
</div>
<p>&nbsp;注意：</p>
<p>a HttpURLConnection的connect()函数，实际上只是建立了一个与服务器的tcp连接，并没有实际发送http请求。</p>
<p>&nbsp;</p>
<div>b 无论是post还是get，http请求实际上直到HttpURLConnection的getInputStream()这个函数里面才正式发送出去。</div>
<div>c 在用POST方式发送URL请求时，URL请求参数的设定顺序是重中之重， 对connection对象的一切配置（那一堆set函数） 都必须要在connect()函数执行之前完成。</div>
<p>d http请求实际上由两部分组成，一个是http头，所有关于此次http请求的配置都在http头里面定义，一个是正文content。connect()函数会根据HttpURLConnection对象的配置值生成http头部信息，因此在调用connect函数之前，&nbsp;</p>
<div>就必须把所有的配置准备好。</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>下载资源</p>
<div class="cnblogs_code">
<div><span style="color: #008080;">&nbsp;1</span>&nbsp;<span style="color: #0000ff;">private</span><span style="color: #000000;">&nbsp;String&nbsp;downloadStringResource(HttpURLConnection&nbsp;connection)&nbsp;{<br /></span><span style="color: #008080;">&nbsp;2</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000;">//</span><span style="color: #008000;">&nbsp;TODO&nbsp;Auto-generated&nbsp;method&nbsp;stub</span><span style="color: #008000;"><br /></span><span style="color: #008080;">&nbsp;3</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br /></span><span style="color: #008080;">&nbsp;4</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StringBuffer&nbsp;content;<br /></span><span style="color: #008080;">&nbsp;5</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InputStream&nbsp;inputstream&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;getSafeInputStream(connection);<br /></span><span style="color: #008080;">&nbsp;6</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span style="color: #000000;">&nbsp;(inputstream&nbsp;</span><span style="color: #000000;">==</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">null</span><span style="color: #000000;">)&nbsp;{<br /></span><span style="color: #008080;">&nbsp;7</span>&nbsp;<span style="color: #000000;"><br /></span><span style="color: #008080;">&nbsp;8</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">""</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">&nbsp;9</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /></span><span style="color: #008080;">10</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000;">//</span><span style="color: #008000;">&nbsp;load&nbsp;the&nbsp;Stream&nbsp;in&nbsp;a&nbsp;StringBuffer</span><span style="color: #008000;"><br /></span><span style="color: #008080;">11</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InputStreamReader&nbsp;isr&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">null</span><span style="color: #000000;">;&nbsp;&nbsp;<br /></span><span style="color: #008080;">12</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">try</span><span style="color: #000000;">&nbsp;{<br /></span><span style="color: #008080;">13</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isr&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">new</span><span style="color: #000000;">&nbsp;InputStreamReader(inputstream,</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.charSet);<br /></span><span style="color: #008080;">14</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span style="color: #000000;">(isr&nbsp;</span><span style="color: #000000;">!=</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">null</span><span style="color: #000000;">)<br /></span><span style="color: #008080;">15</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CheckMethods.PrintInfoMessage(</span><span style="color: #000000;">"</span><span style="color: #000000;">InputStreamReader&nbsp;is&nbsp;created</span><span style="color: #000000;">"</span><span style="color: #000000;">);<br /></span><span style="color: #008080;">16</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</span><span style="color: #0000ff;">catch</span><span style="color: #000000;">&nbsp;(Exception&nbsp;e)&nbsp;{<br /></span><span style="color: #008080;">17</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000;">//</span><span style="color: #008000;">&nbsp;TODO&nbsp;Auto-generated&nbsp;catch&nbsp;block</span><span style="color: #008000;"><br /></span><span style="color: #008080;">18</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CheckMethods.PrintInfoMessage(Thread.currentThread().getName()</span><span style="color: #000000;">+</span><span style="color: #000000;">&nbsp;e.getMessage());<br /></span><span style="color: #008080;">19</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();<br /></span><span style="color: #008080;">20</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">""</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">21</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /></span><span style="color: #008080;">22</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">new</span><span style="color: #000000;">&nbsp;StringBuffer();<br /></span><span style="color: #008080;">23</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CheckMethods.PrintInfoMessage(</span><span style="color: #000000;">"</span><span style="color: #000000;">StringBuffer&nbsp;is&nbsp;created</span><span style="color: #000000;">"</span><span style="color: #000000;">);<br /></span><span style="color: #008080;">24</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">try</span><span style="color: #000000;">&nbsp;{<br /></span><span style="color: #008080;">25</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">char</span><span style="color: #000000;">&nbsp;buf[]&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">new</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">char</span><span style="color: #000000;">[</span><span style="color: #000000;">4096</span><span style="color: #000000;">];<br /></span><span style="color: #008080;">26</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span style="color: #000000;">&nbsp;cnt&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">0</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">27</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">while</span><span style="color: #000000;">&nbsp;((cnt&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;isr.read(buf,&nbsp;</span><span style="color: #000000;">0</span><span style="color: #000000;">,&nbsp;</span><span style="color: #000000;">4096</span><span style="color: #000000;">))&nbsp;</span><span style="color: #000000;">!=</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">-</span><span style="color: #000000;">1</span><span style="color: #000000;">)&nbsp;{<br /></span><span style="color: #008080;">28</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content.append(buf,&nbsp;</span><span style="color: #000000;">0</span><span style="color: #000000;">,&nbsp;cnt);<br /></span><span style="color: #008080;">29</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.print(</span><span style="color: #000000;">"</span><span style="color: #000000;">.</span><span style="color: #000000;">"</span><span style="color: #000000;">);<br /></span><span style="color: #008080;">30</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /></span><span style="color: #008080;">31</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isr.close();<br /></span><span style="color: #008080;">32</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inputstream.close();<br /></span><span style="color: #008080;">33</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connection.disconnect();<br /></span><span style="color: #008080;">34</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</span><span style="color: #0000ff;">catch</span><span style="color: #000000;">&nbsp;(IOException&nbsp;ioexception)&nbsp;{<br /></span><span style="color: #008080;">35</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LogHelper.WriteLog(LogHelper.logger_Error,&nbsp;CommonValues.Log_Detail_Level,&nbsp;</span><span style="color: #000000;">"</span><span style="color: #000000;">error</span><span style="color: #000000;">"</span><span style="color: #000000;">,&nbsp;</span><span style="color: #000000;">"</span><span style="color: #000000;">下载时读取网页</span><span style="color: #000000;">"</span><span style="color: #000000;">+</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.pageUrl</span><span style="color: #000000;">+</span><span style="color: #000000;">"</span><span style="color: #000000;">内容出现异常</span><span style="color: #000000;">"</span><span style="color: #000000;">);<br /></span><span style="color: #008080;">36</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LogHelper.WriteLog(LogHelper.logger_Downloader,&nbsp;CommonValues.Log_Detail_Level,&nbsp;</span><span style="color: #000000;">"</span><span style="color: #000000;">error</span><span style="color: #000000;">"</span><span style="color: #000000;">,&nbsp;</span><span style="color: #000000;">"</span><span style="color: #000000;">下载时读取网页</span><span style="color: #000000;">"</span><span style="color: #000000;">+</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.pageUrl</span><span style="color: #000000;">+</span><span style="color: #000000;">"</span><span style="color: #000000;">内容出现异常</span><span style="color: #000000;">"</span><span style="color: #000000;">);<br /></span><span style="color: #008080;">37</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CheckMethods.PrintInfoMessage(Thread.currentThread().getName()</span><span style="color: #000000;">+</span><span style="color: #000000;">"</span><span style="color: #000000;">&nbsp;下载时读取网页</span><span style="color: #000000;">"</span><span style="color: #000000;">+</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.pageUrl</span><span style="color: #000000;">+</span><span style="color: #000000;">"</span><span style="color: #000000;">内容出现异常</span><span style="color: #000000;">"</span><span style="color: #000000;">);<br /></span><span style="color: #008080;">38</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">try</span><span style="color: #000000;">&nbsp;{<br /></span><span style="color: #008080;">39</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isr.close();<br /></span><span style="color: #008080;">40</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inputstream.close();<br /></span><span style="color: #008080;">41</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</span><span style="color: #0000ff;">catch</span><span style="color: #000000;">&nbsp;(IOException&nbsp;e)&nbsp;{<br /></span><span style="color: #008080;">42</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000;">//</span><span style="color: #008000;">&nbsp;TODO&nbsp;Auto-generated&nbsp;catch&nbsp;block</span><span style="color: #008000;"><br /></span><span style="color: #008080;">43</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();<br /></span><span style="color: #008080;">44</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CheckMethods.PrintInfoMessage(Thread.currentThread().getName()</span><span style="color: #000000;">+</span><span style="color: #000000;">"</span><span style="color: #000000;">&nbsp;exception&nbsp;occurred&nbsp;after&nbsp;reading&nbsp;io&nbsp;exception&nbsp;when&nbsp;inputstream&nbsp;and&nbsp;isr&nbsp;is&nbsp;closing&nbsp;</span><span style="color: #000000;">"</span><span style="color: #000000;">);<br /></span><span style="color: #008080;">45</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LogHelper.WriteLog(LogHelper.logger_Error,&nbsp;CommonValues.Log_Detail_Level,&nbsp;</span><span style="color: #000000;">"</span><span style="color: #000000;">fatal</span><span style="color: #000000;">"</span><span style="color: #000000;">,&nbsp;</span><span style="color: #000000;">"</span><span style="color: #000000;">exception&nbsp;occurred&nbsp;after&nbsp;reading&nbsp;io&nbsp;exception&nbsp;when&nbsp;inputstream&nbsp;and&nbsp;isr&nbsp;is&nbsp;closing</span><span style="color: #000000;">"</span><span style="color: #000000;">);<br /></span><span style="color: #008080;">46</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connection.disconnect();<br /></span><span style="color: #008080;">47</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">""</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">48</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /></span><span style="color: #008080;">49</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connection.disconnect();<br /></span><span style="color: #008080;">50</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">""</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">51</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /></span><span style="color: #008080;">52</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span style="color: #000000;">&nbsp;content.toString();<br /></span><span style="color: #008080;">53</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div>
</div>
<p>&nbsp;</p>
<div class="cnblogs_code">
<div><span style="color: #008080;">&nbsp;1</span>&nbsp;<span style="color: #0000ff;">private</span><span style="color: #000000;">&nbsp;InputStream&nbsp;getSafeInputStream(HttpURLConnection&nbsp;connection)<br /></span><span style="color: #008080;">&nbsp;2</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;{<br /></span><span style="color: #008080;">&nbsp;3</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InputStream&nbsp;inputstream&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">null</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">&nbsp;4</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">for</span><span style="color: #000000;">&nbsp;(</span><span style="color: #0000ff;">int</span><span style="color: #000000;">&nbsp;i&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">0</span><span style="color: #000000;">;&nbsp;i&nbsp;</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">3</span><span style="color: #000000;">;&nbsp;)&nbsp;{<br /></span><span style="color: #008080;">&nbsp;5</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">try</span><span style="color: #000000;">&nbsp;{<br /></span><span style="color: #008080;">&nbsp;6</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inputstream&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;connection.getInputStream();<br /></span><span style="color: #008080;">&nbsp;7</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">&nbsp;8</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</span><span style="color: #0000ff;">catch</span><span style="color: #000000;">&nbsp;(IOException&nbsp;ioexception1)&nbsp;{<br /></span><span style="color: #008080;">&nbsp;9</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">10</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /></span><span style="color: #008080;">11</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /></span><span style="color: #008080;">12</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span style="color: #000000;">&nbsp;inputstream;<br /></span><span style="color: #008080;">13</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div>
</div>
<p>当然如果你要完成一个爬虫，又怕自己的ip地址被封的话。。。。。代理吧</p>
<p>设置代理的方法如下：</p>
<div class="cnblogs_code">
<div><span style="color: #000000;">SocketAddress&nbsp;proxyAddress</span><span style="color: #000000;">=</span><span style="color: #0000ff;">new</span><span style="color: #000000;">&nbsp;InetSocketAddress(ipAddress,port);<br />Proxy&nbsp;proxy&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">new</span><span style="color: #000000;">&nbsp;Proxy(Proxy.Type.HTTP,&nbsp;proxyAddress);&nbsp;<br />urlconnection&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;pageUrl.openConnection(proxy);<br />urlconnection&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;pageUrl.openConnection();</span></div>
</div>
<p>&nbsp;</p>
<p>下载资源文件的方式则有些不同~</p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<div><span style="color: #008080;">&nbsp;1</span>&nbsp;<span style="color: #0000ff;">public</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">static</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">void</span><span style="color: #000000;">&nbsp;downloadFile(String&nbsp;destUrl,&nbsp;String&nbsp;fileName)&nbsp;</span><span style="color: #0000ff;">throws</span><span style="color: #000000;">&nbsp;IOException&nbsp;{<br /></span><span style="color: #008080;">&nbsp;2</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileOutputStream&nbsp;fos&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">null</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">&nbsp;3</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BufferedInputStream&nbsp;bis&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">null</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">&nbsp;4</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpURLConnection&nbsp;httpUrl&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">null</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">&nbsp;5</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;URL&nbsp;url&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">null</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">&nbsp;6</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">byte</span><span style="color: #000000;">[]&nbsp;buf&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">new</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">byte</span><span style="color: #000000;">[</span><span style="color: #000000;">8096</span><span style="color: #000000;">];<br /></span><span style="color: #008080;">&nbsp;7</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span style="color: #000000;">&nbsp;size&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">0</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">&nbsp;8</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br /></span><span style="color: #008080;">&nbsp;9</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000;">//</span><span style="color: #008000;">建立链接</span><span style="color: #008000;"><br /></span><span style="color: #008080;">10</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">new</span><span style="color: #000000;">&nbsp;URL(destUrl);<br /></span><span style="color: #008080;">11</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;httpUrl&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;(HttpURLConnection)&nbsp;url.openConnection();<br /></span><span style="color: #008080;">12</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000;">//</span><span style="color: #008000;">连接指定的资源</span><span style="color: #008000;"><br /></span><span style="color: #008080;">13</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;httpUrl.connect();<br /></span><span style="color: #008080;">14</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000;">//</span><span style="color: #008000;">获取网络输入流</span><span style="color: #008000;"><br /></span><span style="color: #008080;">15</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bis&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">new</span><span style="color: #000000;">&nbsp;BufferedInputStream(httpUrl.getInputStream());<br /></span><span style="color: #008080;">16</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000;">//</span><span style="color: #008000;">建立文件</span><span style="color: #008000;"><br /></span><span style="color: #008080;">17</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fos&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">new</span><span style="color: #000000;">&nbsp;FileOutputStream(fileName);<br /></span><span style="color: #008080;">18</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(</span><span style="color: #000000;">"</span><span style="color: #000000;">正在获取链接[</span><span style="color: #000000;">"</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">+</span><span style="color: #000000;">&nbsp;destUrl&nbsp;</span><span style="color: #000000;">+</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">"</span><span style="color: #000000;">]的内容...\n将其保存为文件[</span><span style="color: #000000;">"</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">+</span><span style="color: #000000;"><br /></span><span style="color: #008080;">19</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fileName&nbsp;</span><span style="color: #000000;">+</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">"</span><span style="color: #000000;">]</span><span style="color: #000000;">"</span><span style="color: #000000;">);<br /></span><span style="color: #008080;">20</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000;">//</span><span style="color: #008000;">保存文件</span><span style="color: #008000;"><br /></span><span style="color: #008080;">21</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">while</span><span style="color: #000000;">&nbsp;((size&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;bis.read(buf))&nbsp;</span><span style="color: #000000;">!=</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">-</span><span style="color: #000000;">1</span><span style="color: #000000;">)<br /></span><span style="color: #008080;">22</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fos.write(buf,&nbsp;</span><span style="color: #000000;">0</span><span style="color: #000000;">,&nbsp;size);<br /></span><span style="color: #008080;">23</span>&nbsp;<span style="color: #000000;"><br /></span><span style="color: #008080;">24</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fos.close();<br /></span><span style="color: #008080;">25</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bis.close();<br /></span><span style="color: #008080;">26</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;httpUrl.disconnect();<br /></span><span style="color: #008080;">27</span>&nbsp;<span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div>
</div>
<p>&nbsp;好了 先说这么多吧 大家可以去尝试一下~</p>
<p>&nbsp;</p></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory"></div>
<div id="EntryTag"></div>
<div id="blog_post_info">
</div>
<div class="clear"></div>
<div id="post_next_prev"></div>
</div>


		</div>
		<div class = "postDesc">posted @ <span id="post-date">2011-07-04 22:13</span> <a href='http://www.cnblogs.com/luchen927/'>~大器晚成~</a> 阅读(<span id="post_view_count">...</span>) 评论(<span id="post_comment_count">...</span>)  <a href ="http://i.cnblogs.com/EditPosts.aspx?postid=2094096" rel="nofollow">编辑</a> <a href="#" onclick="AddToWz(2094096);return false;">收藏</a></div>
	</div>
	<script type="text/javascript">var allowComments=true,isLogined=false,cb_blogId=26053,cb_entryId=2094096,cb_blogApp=currentBlogApp,cb_blogUserGuid='e6713d0b-63cf-dd11-9e4d-001cf0cd104b',cb_entryCreatedDate='2011/7/4 22:13:00';loadViewCount(cb_entryId);</script>
	
</div><!--end: topics 文章、评论容器-->
</div><a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id="comment_form" class="commentform">
<a name="commentform"></a>
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" id="lnk_RefreshComments" onclick="return RefreshCommentList();">刷新评论</a><a href="#" onclick="return RefreshPage();">刷新页面</a><a href="#top">返回顶部</a></div>
<div id="comment_form_container"></div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="site_nav_under"><a href="http://www.cnblogs.com/" target="_blank" title="开发者的网上家园">博客园首页</a><a href="http://q.cnblogs.com/" target="_blank" title="程序员问答社区">博问</a><a href="http://news.cnblogs.com/" target="_blank" title="IT新闻">新闻</a><a href="http://home.cnblogs.com/ing/" target="_blank">闪存</a><a href="http://job.cnblogs.com/" target="_blank">程序员招聘</a><a href="http://kb.cnblogs.com/" target="_blank">知识库</a></div>
<div id="opt_under_post"></div>
<script type="text/javascript">
    fixPostBodyFormat();
</script>
<div id="google_ad_c1" class="c_ad_block"></div>
<div id="under_post_news"></div>
<div id="google_ad_c2" class="c_ad_block"></div>
<div id="under_post_kb"></div>
<div id="HistoryToday" class="c_ad_block"></div>
<script type="text/javascript">
$(function () {
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
});
</script>
</div>

	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<!--done-->
<div class="newsItem">
<h3 class="catListTitle">公告</h3>
	<div id="blog-news"></div><script type="text/javascript">loadBlogNews();</script>
</div>

			<div id="calendar"><div id="blog-calendar" style="display:none"></div><script type="text/javascript">loadBlogDefaultCalendar();</script></div>
			
			<DIV id="leftcontentcontainer">
				<div id="blog-sidecolumn"></div><script type="text/javascript">loadBlogSideColumn();</script>
			</DIV>
			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		
<!--done-->
Copyright &copy;2015 ~大器晚成~ 谨以此模板祝贺【博客园开发者征途】系列图书之《你必须知道的.NET》出版发行
	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->
</body>
</html>
