<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang='zh-CN' xml:lang='zh-CN' xmlns='http://www.w3.org/1999/xhtml'>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta http-equiv="Content-Language" content="zh-CN"/>
  <meta name="robots" content="index, follow" />
  <link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico?t=1423294220000" />
  <title>druid简单教程 -  Java编程思想的个人空间 - 开源中国社区</title>
      <meta name="Description" content="druid简单教程：java程序很大一部分要操作数据库，为了提高性能操作数据库的时候，有不得不使用数据库连接池。数据库连接..."/>
    <link rel="stylesheet/less" href="http://my.oschina.net/u/1157906/styles.less?ver=20150812" type="text/css" media="screen" />
  <link rel="stylesheet" href="/js/2012/poshytip/tip-yellowsimple/tip-yellowsimple.css?t=1399607778000" type="text/css" />
  <link rel="stylesheet" type="text/css" href="/js/2011/fancybox/jquery.fancybox-1.3.4.css?t=1399607777000" media="screen" />
	<!--添加emoji支持-->
    <link rel="stylesheet" type="text/css" href="/js/team/grunt/dist/emoji/nature.css?t=1430349168000">
    <link rel="stylesheet" type="text/css" href="/js/team/grunt/dist/emoji/object.css?t=1430349168000">
    <link rel="stylesheet" type="text/css" href="/js/team/grunt/dist/emoji/people.css?t=1429214431000">
    <link rel="stylesheet" type="text/css" href="/js/team/grunt/dist/emoji/place.css?t=1429214431000">
    <link rel="stylesheet" type="text/css" href="/js/team/grunt/dist/emoji/Sysmbols.css?t=1429214431000">
    <link rel="stylesheet" type="text/css" href="/js/team/grunt/dist/emoji/twemoji.css?t=1429214431000">

  <script type="text/javascript" src="/js/2012/jquery-1.7.1.min.js?t=1399607778000"></script>
  <script type="text/javascript" src="/js/2012/jquery.form.js?t=1399607778000"></script>
  <script type="text/javascript" src="/js/2011/fancybox/jquery.fancybox-1.3.4.pack.js?t=1399607777000?2014031702"></script>
  <script type="text/javascript" src="/js/2012/poshytip/jquery.poshytip.min.js?t=1399607778000"></script>
  <script type="text/javascript" src="/js/2011/oschina.js?t=1399607777000"></script>
  <script type="text/javascript" src="/js/2012/less-1.3.0.min.js?t=1399607778000"></script>
  <script type="text/javascript" src="/js/scrolltopcontrol.js?t=1399607778000"></script>
  <script type='text/javascript' src='/js/jquery/jquery.atwho.js?t=1399607772000'></script>
  <script type="text/javascript" src="/js/lib/angular/angular.min.js?t=1423294214000"></script>
  <script type="text/javascript" src="/js/lib/angular/angular-sanitize.min.js?t=1423294214000"></script>
  <script type="text/javascript" src="/js/lib/angular/angular-resource.min.js?t=1423294214000"></script>
  <link rel="stylesheet" href="/css/team/font-awesome/font-awesome.css?t=1428390908000" type="text/css">
  <link rel="stylesheet" type="text/css" href="/js/jquery/jquery.atwho.css?t=1399607771000" />
  <link rel="alternate" type="application/rss+xml" title="最新博客" href="http://my.oschina.net/u/1157906/rss" />
  <link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://my.oschina.net/action/xmlrpc/rsd?space=1157906" />
  <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://my.oschina.net/action/xmlrpc/wlwmanifest?space=1157906" /> 
  <style type="text/css">
    body,table,input,textarea,select {font-family:Microsoft YaHei,Verdana,sans-serif,宋体;}

      emoji[data-emoji~=emoji] {
          display: inline-block;
          width: 24px;
          height: 24px;
          line-height: 24px;
          vertical-align: top;
          text-align: center;
      }
  </style>
  <script type="text/javascript">
  	scrolltotop.offset(100,165);
	scrolltotop.init();
  </script>
</head>
<body>
<div id="OSC_Screen">
	<style type="text/css">
    #OSC_Banner {margin: 0 auto;text-align: left;margin-bottom: 5px;height:30px;border-top:0px;}
    #OSC_Banner a {text-decoration: none;color: #fff;}
    #OSC_Banner .cs_content a {color: #080;}
    #OSC_Banner a:hover {color: #eee;}
	#OSC_Banner a.project{background-color:transparent;}
    #OSC_Banner #OSC_Channel {float: left;height:30px;}
    #OSC_Banner #OSC_Channel ul {line-height: 18px;}
    #OSC_Banner #OSC_Channel ul li.item {float: left;margin: 0 16px 0 0;line-height: 30px;}
    #OSC_Banner #OSC_Channel ul li a.hl {font-weight: bold;}
    #OSC_Banner #OSC_Userbar {float: right;	color: #ddd;line-height:30px;margin-right:10px;}
    #OSC_Banner #OSC_Userbar em {font-style: normal;color: #fff;margin-right: 2px;}
	/*下拉菜单*/
	#OSC_Banner .control_select {position: relative;background: url('/img/down3.gif') no-repeat right 14px;padding-right: 8px;cursor: pointer;height: 25px;display: inline-block;z-index: 1001;}
	#OSC_Banner .control_select a {position: relative;}
	#OSC_Banner .control_select ul.cs_content {display: none;text-align: left;position: absolute;left: 0px;top: 25px;width: 110px;z-index: 9999;background: white;padding: 5px 0 2px 5px;font-size: 9pt;list-style-type: none;}
	#OSC_Banner .control_select ul.cs_content li {border: 0;height: 16px;line-height: 16px;margin-bottom: 8px;}
	#OSC_Banner .control_select ul.cs_content li a:hover {font-weight: bold;background: #fff;color: #A00}
	#OSC_Banner .group_msg_count {display: inline-block;	padding: 2px;border-radius: 3px;background-color: RGB(255, 113, 112);color: white;font-size: 12px;height: 10px;text-align: center;
		line-height: 10px;min-width: 15px;box-shadow: 1px 1px 1px RGBA(0, 0, 0, 0.2);-webkit-box-shadow: 1px 1px 1px RGBA(0, 0, 0, 0.2);-moz-box-shadow: 1px 1px 1px RGBA(0, 0, 0, 0.2);}
	.tip-yellowsimple .tip-arrow-top{left:80%;}
</style>
<script type="text/javascript">
  	g_user = {
	id:0,
	name:'',
	login:false};</script>
<script type="text/javascript" src="/js/utils.js?t=1445555790000"></script>
<script type="text/javascript" src="/js/channel.js?t=1428620246000?2014022501"></script>
<div id='OSC_Banner'>
        <div id="OSC_Channel" style="float:left;margin-left:10px;">
        	<ul>
        	<li class="item"><a href="http://www.oschina.net/" class='home'>首页</a></li>        	<li class="item control_select"><a href="http://www.oschina.net/project" class='project'>开源项目</a>
				<ul class="cs_content">					
                	                	<li><a href="http://www.oschina.net/project/lang/19/java">Java 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/194/csharp">C# 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/22/php">PHP 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/21/c">C/C++ 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/26/ruby">Ruby 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/25/python">Python 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/358/go">Go开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/28/javascript">JS开源软件</a></li>
				</ul>
			</li>
        	<li class="item control_select">
				<a href="http://www.oschina.net/question" class='question'>问答</a>				
				<ul class="cs_content">					
                	<li><a href="http://www.oschina.net/question?catalog=1"> 技术问答 &raquo; </a></li>
                	<li><a href="http://www.oschina.net/question?catalog=2"> 技术分享 &raquo; </a></li>
                	<li><a href="http://www.oschina.net/question?catalog=3"> IT大杂烩 &raquo; </a></li>
                	<li><a href="http://www.oschina.net/question?catalog=100"> 职业生涯 &raquo; </a></li>
                	<li><a href="http://www.oschina.net/question?catalog=4"> 站务/建议 &raquo; </a></li>
                	<li><a href="http://www.oschina.net/alipay"> 支付宝专区 &raquo; </a></li>
                	<li><a href="http://www.oschina.net/hardware"> 开源硬件专区 &raquo; </a></li>
				</ul>
			</li>
        	<li class="item"><a href="http://www.oschina.net/code/list" class='code'>代码</a></li>
        	        	<li class="item"><a href="http://www.oschina.net/blog" class='blog'>博客</a></li>
        	<li class="item"><a href="http://www.oschina.net/translate" class='tran'>翻译</a></li>
            <li class="item"><a href="http://www.oschina.net/news" class='news'>资讯</a></li>
        	<li class="item control_select">
				<a href="http://www.oschina.net/android" class='mobile'>移动开发</a>
				<ul class="cs_content cs_mobile">
                	<li class="android_"><a href="http://www.oschina.net/android">Android开发专区</a></li>
                	<li class="ios_"><a href="http://www.oschina.net/ios/home">iOS开发专区</a></li>
                	<li class="ios_"><a href="http://www.oschina.net/ios/codingList">iOS代码库</a></li>
                	<li class="wp7_"><a href="http://www.oschina.net/wp">Windows Phone</a></li>
				</ul>
			</li>
        	<li class="item t_job"><a href="http://www.oschina.net/job" class='job'>招聘</a></li>
									            <li class="item control_select">
                <a href="http://city.oschina.net/" id="MyCities" title="城市圈">城市圈</a>
							</li>
        	</ul>
        </div>
		<div id="OSC_Userbar">
                		    		当前访客身份：游客 [ <a href="http://www.oschina.net/home/login?goto_page=http%3A%2F%2Fmy.oschina.net%2Fu%2F1157906%2Fblog%2F182470">登录</a> | <a href="http://www.oschina.net/home/reg">加入开源中国</a> ]
    				</div>
		<div class='clear'></div>
</div>	<div id="OSC_Topbar">
		<div id="VisitorInfo">
		当前访客身份：
				游客 [ <a href="http://www.oschina.net/home/login?goto_page=http%3A%2F%2Fmy.oschina.net%2Fu%2F1157906">登录</a> | <a href="http://www.oschina.net/home/reg">加入开源中国</a> ]
				
		</div>
		<div id="SearchBar">
    		<form action="http://www.oschina.net/search">
				<input type='hidden' name='user' value='1157906'/>
																<span class="ipt f_l">
    			<input type='text' id='txt_q' name='q' class='SERACH' value='在 39793 款开源软件中搜索' onblur="(this.value=='')?this.value='在 39793 款开源软件中搜索':this.value" onfocus="if(this.value=='在 39793 款开源软件中搜索'){this.value='';};this.select();"/>
				</span>
				                <div class="search-by selectbox">
    				<span class="hide">
    				<select name='scope'>					
                        <option value='project' selected>软件</option>
                        <option value='code'>代码</option>
                        <option value='bbs'>讨论区</option>
                        <option value='news'>新闻</option>
                        <option value='blog'>博客</option>
    				</select>
    				</span>
                  <div class="search_on" id="search-item"><span class="text">软件</span></div>
                  <ul class="search_list">
                     <li class="search-item"><a href="#1">软件</a></li>
                     <li><a href="#2">代码</a></li>
                     <li><a href="#3">讨论区</a></li>
                     <li><a href="#4">新闻</a></li>
                     <li><a href="#5">博客</a></li>
                  </ul>
                </div>
				<input type='submit' value='搜索' class='bnt f_r'/>			
    		</form>
		</div>
		<div class='clear'></div>
	</div>
	<div id="OSC_Content">					            			


<style>
	.icon{width:20px;height:20px;vertical-align: middle;display:inline-block;font-size:14px;text-align:center;color:#FFF;font-weight: bold;}
	.catalogs{padding:0px;margin:0px;position:relative;display:inline-block;}
    .catalogs ul{padding:0px;margin:0px;position:absolute;left:-8px;top: -21px;clear:left;width:120px;height:14px;overflow:hidden;background:#FFF;z-index:1000;padding:5px;border:1px solid #FFF;}
    .catalogs ul:hover{height:auto;background:#fff;border:1px solid #4466bb;}
    .catalogs ul li a:hover{color:#A00;font-weight: bold;}
	.BlogStat a:hover{background:#FFF;}
	.BlogStat{font-size:12px;line-height:20px;}
	.BlogStat .g{color:#40AA53}
	.BlogTags{margin-top:8px;}
		.BlogAbstracts{}
</style>
<div id='SpaceLeft'>
<div class='Owner'>
	    <a href="http://my.oschina.net/u/1157906" class='Img'><img src="/img/portrait.gif?t=1399607780000" align="absmiddle" alt="Java编程思想" title="Java编程思想" class="LargePortrait"/></a>
    <span class='U'>
                    <a href="http://my.oschina.net/u/1157906" class='Name' title='男'>Java编程思想</a>
        		<span class='opts'>
			<img src="/img/2012/men.png" align='absmiddle' title='男'/>
        			<script type='text/javascript'>
var nologin = "<a href='javascript:_follow_nologin()' title='成为TA的粉丝'>关注此人</a>"
var follow0 = "<a href='javascript:_follow_user(1157906,true)' title='成为TA的粉丝'>关注此人</a>";
var follow1 = "已关注 | <a href='javascript:_follow_user(1157906,false)' title='取消关注后，此人的更新信息将不会出现在你的首页'>取消</a>";
var follow2 = "互相关注 | <a href='javascript:_follow_user(1157906,false)' title='取消关注后，此人的更新信息将不会出现在你的首页'>取消</a>";
var follow4 = "<a href='javascript:_follow_user(1157906,true)' title='成为TA的粉丝'>+关注此人</a>";

document.write("<span id='_follow_1157906_action_'>");
	document.write(nologin);
document.write("</span>");

function _follow_nologin(){
	if(confirm('必须登录后才能关注，是否现在登录？')){
		location.href="http://www.oschina.net/home/login?goto_page="+location.href;
	}
}

function _follow_user(uid, follow){
	var action = follow?"/action/user/follow":"/action/user/unfollow";
	ajax_post(action,"id="+uid+"&user=${g_user.id}",function(result){
		var act = $('#_follow_1157906_action_');
		if(result == '0')
			_follow_nologin();
		else if(result == '1')
			act.html(follow0);
		else if(result == '2')
			act.html(follow1);
		else if(result == '3')
			act.html(follow2);
		else if(result == '4')
			act.html(follow4);
	});
}
</script>				</span>
    </span>
    <div class='clear'></div>
    <div class='stat'>
    	<a href="http://my.oschina.net/u/1157906/fellow">关注<span>(0)</span></a>
    	<a href="http://my.oschina.net/u/1157906/fans">粉丝<span>(15)</span></a>
    	<a href="http://www.oschina.net/question/3307_20931" title="查看OSCHINA积分规则">积分<span>(12)</span></a>
                       
    </div>
</div>    <style type="text/css">
    #Medals {margin-left: 3px; height: 28px;}
    #Medals li {float: left;margin: 3px 5px;line-height: 24px;}
    .tip-yellowsimple-medal {
        z-index: 1000;
        text-align: left;
        border: 1px solid #E6DEB6;
        border-radius: 4px;
        -moz-border-radius: 4px;
        -webkit-border-radius: 4px;
        padding: 6px 8px;
        min-width: 50px;
        max-width: 300px;
        color: #000;
        background-color: #FFFEF2;
    }
	.tip-yellowsimple-medal .tip-arrow-left {
		visibility: inherit;
        margin-top: -4px;
        margin-left: -6px;
        top: 15px;
        left: 0;
        width: 6px;
        height: 9px;
        background: url(/js/2012/poshytip/tip-yellowsimple/tip-yellowsimple_arrows.gif?t=1399607778000) no-repeat -27px 0;
	}
	div.tip-yellowsimple-medal div.tip-arrow {
        visibility: hidden;
        position: absolute;
        overflow: hidden;
        font: 1px/1px sans-serif;
	}
</style>
<script type="text/javascript">
    $(function(){
        $('#Medals a').poshytip({
            className: 'tip-yellowsimple-medal',
            alignTo: 'target',
            alignX: 'right',
            alignY: 'bottom',
            offsetX: 10,
            offsetY: -30,
            fade: false,
            slide: false,
            content: function(updateCallback) {
                ajax_get("/action/ajax/get_medal_detail?owner=1157906&medalId="+$(this).attr('medalId')+"&time="+new Date().getTime(),false,function(html){
                    updateCallback(html);
                    if($('.tip-arrow.tip-arrow-left').last().offset().top >= temp.offset().top) {
                        $('.tip-arrow.tip-arrow-left').last().css({top : "15px"});
                    }
                    else {
                        $('.tip-arrow.tip-arrow-left').last().css({top : "135px"});
                    }
                });
                temp = $(this);
                return "<div style='height:100px;'>Loading...</div>";
            }
        });
    });
</script>
<style>
#MyResume textarea {width:170px;height:60px;font-size:9pt;}
</style>
<div class='Resume' id='MyResume'>
这个人很懒，啥也没写</div>

<div class='Opts clearfix'>
	<a href="javascript:sendmsg(1157906, 0)" class='a1 sendmsg'><i>.</i><span>发送私信</span></a>
	<a href="http://www.oschina.net/question/ask?user=1157906" class='a2 ask'><i>.</i><span>请教问题</span></a>
</div><div class="Mod" id="BlogCatalogs">
  <strong> 博客分类</strong>
  <ul>
	    	<li><a href="http://my.oschina.net/u/1157906/blog?catalog=536028">SSO</a><span>(3)</span></li>
		<li><a href="http://my.oschina.net/u/1157906/blog?catalog=451182">Spring</a><span>(3)</span></li>
		<li><a href="http://my.oschina.net/u/1157906/blog?catalog=454415">Tomcat</a><span>(3)</span></li>
		<li><a href="http://my.oschina.net/u/1157906/blog?catalog=482392">Weblogic</a><span>(2)</span></li>
		<li><a href="http://my.oschina.net/u/1157906/blog?catalog=502688">Hibernate</a><span>(7)</span></li>
		<li><a href="http://my.oschina.net/u/1157906/blog?catalog=509138">SQL Server</a><span>(2)</span></li>
		<li><a href="http://my.oschina.net/u/1157906/blog?catalog=510021">svn</a><span>(4)</span></li>
		<li><a href="http://my.oschina.net/u/1157906/blog?catalog=511236">Android自动打包系列</a><span>(3)</span></li>
		<li><a href="http://my.oschina.net/u/1157906/blog?catalog=520448">Cordova</a><span>(2)</span></li>
		<li><a href="http://my.oschina.net/u/1157906/blog?catalog=533021">Struts2</a><span>(1)</span></li>
		<li><a href="http://my.oschina.net/u/1157906/blog?catalog=533286">Servlet</a><span>(3)</span></li>
		<li><a href="http://my.oschina.net/u/1157906/blog?catalog=450697">MyBatis</a><span>(3)</span></li>
		<li><a href="http://my.oschina.net/u/1157906/blog?catalog=435553">quartz</a><span>(3)</span></li>
		<li><a href="http://my.oschina.net/u/1157906/blog?catalog=410183">SWT</a><span>(6)</span></li>
		<li><a href="http://my.oschina.net/u/1157906/blog?catalog=410468">Eclipse</a><span>(10)</span></li>
		<li><a href="http://my.oschina.net/u/1157906/blog?catalog=414489">Android</a><span>(8)</span></li>
		<li><a href="http://my.oschina.net/u/1157906/blog?catalog=419353">Maven</a><span>(7)</span></li>
		<li><a href="http://my.oschina.net/u/1157906/blog?catalog=426705">IntelliJ IDEA</a><span>(3)</span></li>
		<li><a href="http://my.oschina.net/u/1157906/blog?catalog=432843">JavaScript</a><span>(2)</span></li>
		<li><a href="http://my.oschina.net/u/1157906/blog?catalog=435106">log4j</a><span>(5)</span></li>
		<li><a href="http://my.oschina.net/u/1157906/blog?catalog=414497">JAVA</a><span>(56)</span></li>
		<li><a href="http://my.oschina.net/u/1157906/blog?catalog=410188">UNIX</a><span>(2)</span></li>
		<li><a href="http://my.oschina.net/u/1157906/blog?catalog=355963">工作日志</a><span>(20)</span></li>
		<li><a href="http://my.oschina.net/u/1157906/blog?catalog=428172">HTML</a><span>(3)</span></li>
		<li><a href="http://my.oschina.net/u/1157906/blog?catalog=477676">ligerui</a><span>(2)</span></li>
	  </ul>
</div><div class="Mod" id="HotBlogs">
  <strong>阅读排行</strong>
  <ol>
			<li><a href="http://my.oschina.net/u/1157906/blog/193612">1. Spring整合Quartz（JobDetailBean方式）</a></li>
				<li><a href="http://my.oschina.net/u/1157906/blog/205122">2. mybatis 多表关联查询</a></li>
				<li><a href="http://my.oschina.net/u/1157906/blog/205907">3. Error running Tomcat8: Address localhost:1099 is a</a></li>
				<li><a href="http://my.oschina.net/u/1157906/blog/203384">4. Spring动态创建，加载，使用多数据源</a></li>
				<li><a href="http://my.oschina.net/u/1157906/blog/202938">5. Mybatis类型转换介绍</a></li>
				<li><a href="http://my.oschina.net/u/1157906/blog/284013">6. Cannot checkout from svn: Cannot run program "svn"</a></li>
				<li><a href="http://my.oschina.net/u/1157906/blog/181153">7. Spring初始化完成后直接执行一个方法，初始化数据</a></li>
				<li><a href="http://my.oschina.net/u/1157906/blog/206076">8. Could not find result map java.lang.String</a></li>
		  </ol>
</div>
<div class="Mod" id="BlogReplies">
  <strong> 最新评论</strong>  
      <ul>
		<li>
		<a href="http://my.oschina.net/u/736794">@钓鱼岛上钓鱼人</a>：讲的很好，学习了
		<a href="/action/tweet/go?obj=290064698&type=18&user=736794">查看&raquo;</a>
	</li>
		<li>
		<a href="http://my.oschina.net/u/2554755">@夜丶风起</a>：嗨，参考您的代码做的时候，动态设置完事后，实际...
		<a href="/action/tweet/go?obj=290034917&type=18&user=2554755">查看&raquo;</a>
	</li>
		<li>
		<a href="http://my.oschina.net/u/858">@陈飞</a>：赞！
		<a href="/action/tweet/go?obj=289946108&type=18&user=858">查看&raquo;</a>
	</li>
		<li>
		<a href="http://my.oschina.net/zhangjj0324">@LeisureZjj</a>：有用哦，多谢。
		<a href="/action/tweet/go?obj=289047589&type=18&user=1017295">查看&raquo;</a>
	</li>
		<li>
		<a href="http://my.oschina.net/u/782614">@jinlin5162</a>：jarsigner: 找不到release的证书链。release必须...
		<a href="/action/tweet/go?obj=288583012&type=18&user=782614">查看&raquo;</a>
	</li>
		<li>
		<a href="http://my.oschina.net/u/2245029">@mk_believe</a>：谢谢，解决了我的问题。
		<a href="/action/tweet/go?obj=288358058&type=18&user=2245029">查看&raquo;</a>
	</li>
		<li>
		<a href="http://my.oschina.net/u/2313278">@huige0</a>：tttt
		<a href="/action/tweet/go?obj=286923466&type=18&user=2313278">查看&raquo;</a>
	</li>
		<li>
		<a href="http://my.oschina.net/u/2003118">@srhlwdamon</a>：DBCenter....？？
		<a href="/action/tweet/go?obj=285364313&type=18&user=2003118">查看&raquo;</a>
	</li>
		<li>
		<a href="http://my.oschina.net/ruan2140">@亦受</a>：很好，刚要加上返回结果。
		<a href="/action/tweet/go?obj=284212107&type=18&user=2012498">查看&raquo;</a>
	</li>
		<li>
		<a href="http://my.oschina.net/u/188625">@aspboy</a>：非常好
		<a href="/action/tweet/go?obj=281513855&type=18&user=188625">查看&raquo;</a>
	</li>
	  </ul>
  </div>
<div class='Mod' id='Stat'>
<strong>访客统计</strong>
<ul>
	<li><label>今日访问：</label>280</li>
    <li><label>昨日访问：</label>343</li>
    <li><label>本周访问：</label>623</li>
    <li><label>本月访问：</label>862</li>
    <li><label>所有访问：</label>85047</li>
</ul>
</div></div>

<link rel="stylesheet" type="text/css" href="/js/lib/thinker-md/stylesheets/thinker-md.vendor.css?t=1451443660000">
<script src="/js/lib/thinker-md/javascripts/thinker-md.vendor.min.js?t=1440026120000" type="text/javascript"/></script>


<div class='SpaceList'>
	<div class='TopBar'>
    	<div class='NavPath'>
    		<a href='http://my.oschina.net/u/1157906'>空间</a> &raquo; <a href='http://my.oschina.net/u/1157906/blog'>博客</a>
			&raquo;
						<span class="catalogs">
    			<ul>
    										<li ><a href="http://my.oschina.net/u/1157906/blog?catalog=414497">JAVA</a></li>
					        			        				<li ><a href="http://my.oschina.net/u/1157906/blog?catalog=536028">SSO</a></li>    				        				<li ><a href="http://my.oschina.net/u/1157906/blog?catalog=451182">Spring</a></li>    				        				<li ><a href="http://my.oschina.net/u/1157906/blog?catalog=454415">Tomcat</a></li>    				        				<li ><a href="http://my.oschina.net/u/1157906/blog?catalog=482392">Weblogic</a></li>    				        				<li ><a href="http://my.oschina.net/u/1157906/blog?catalog=502688">Hibernate</a></li>    				        				<li ><a href="http://my.oschina.net/u/1157906/blog?catalog=509138">SQL Server</a></li>    				        				<li ><a href="http://my.oschina.net/u/1157906/blog?catalog=510021">svn</a></li>    				        				<li ><a href="http://my.oschina.net/u/1157906/blog?catalog=511236">Android自动打包系列</a></li>    				        				<li ><a href="http://my.oschina.net/u/1157906/blog?catalog=520448">Cordova</a></li>    				        				<li ><a href="http://my.oschina.net/u/1157906/blog?catalog=533021">Struts2</a></li>    				        				<li ><a href="http://my.oschina.net/u/1157906/blog?catalog=533286">Servlet</a></li>    				        				<li ><a href="http://my.oschina.net/u/1157906/blog?catalog=450697">MyBatis</a></li>    				        				<li ><a href="http://my.oschina.net/u/1157906/blog?catalog=435553">quartz</a></li>    				        				<li ><a href="http://my.oschina.net/u/1157906/blog?catalog=410183">SWT</a></li>    				        				<li ><a href="http://my.oschina.net/u/1157906/blog?catalog=410468">Eclipse</a></li>    				        				<li ><a href="http://my.oschina.net/u/1157906/blog?catalog=414489">Android</a></li>    				        				<li ><a href="http://my.oschina.net/u/1157906/blog?catalog=419353">Maven</a></li>    				        				<li ><a href="http://my.oschina.net/u/1157906/blog?catalog=426705">IntelliJ IDEA</a></li>    				        				<li ><a href="http://my.oschina.net/u/1157906/blog?catalog=432843">JavaScript</a></li>    				        				<li ><a href="http://my.oschina.net/u/1157906/blog?catalog=435106">log4j</a></li>    				        				    				        				<li ><a href="http://my.oschina.net/u/1157906/blog?catalog=410188">UNIX</a></li>    				        				<li ><a href="http://my.oschina.net/u/1157906/blog?catalog=355963">工作日志</a></li>    				        				<li ><a href="http://my.oschina.net/u/1157906/blog?catalog=428172">HTML</a></li>    				        				<li ><a href="http://my.oschina.net/u/1157906/blog?catalog=477676">ligerui</a></li>    				    				        				<li><a href="http://my.oschina.net/u/1157906/blog">所有分类</a></li>
    				    			</ul>
			</span>
    	</div>
	</div>

    	<div class='BlogEntity'>
      <div class='BlogTitle'>
        <h1>									<span class="icon" style="background:#799acc;"  title="转帖博客">转</span>						druid简单教程</h1>
        <div class='BlogStat'>
    		    		发表于2年前(2013-12-08 14:58)&nbsp;&nbsp;
    		阅读（<span class="g">759</span>）&nbsp;|&nbsp;评论（<a href="#comments"><span class="g">2</span></a>）
    					    	    <span class='admin'>
				<style>
#TagsSwitcher{color:#A00;}
#RecTags,#MyTags{margin:5px 0;}
#RecTags a.tag{line-height:24px;}
#favor_form p:first-child{margin:5px 0;}
#favor_form{width:200px;}
#favor_form p {color:#666;}
#favor_form form{min-height: 85px;width:200px;}
#favor_form form ._favor_input{display:block;margin:2px 0;width:199px;}
#favor_form form ._favor_button{float:left;padding:2px 5px;}
.favor_ok {text-align:center;font-size:10.5pt;width:199px;height:60px;margin-top:10px;}
#TagsSwitcher{cursor:pointer;float:right;margin-top:10px;}
#MyTags{display:none;width:199px;}
#MyTags a.tag {float:left; background-color: #E0EAF1;border-bottom: 1px solid #3E6D8E;border-right: 1px solid #7F9FB6;color: #3E6D8E;font-size: 8pt;line-height: 16px;margin: 2px 2px 2px 0;padding: 2px 4px;text-decoration: none;white-space: nowrap;}
#MyTags a.tag:hover{background-color: #3E6D8E;color: #FFF;}
</style>
<script type='text/javascript'>
var favor_add = "<a href='javascript:add_to_favor(182470,3)' id='favor_trigger' title='添加到收藏夹'>我要收藏</a>";
var favor_del = "<a href='javascript:delete_favor(182470,3)' id='favor_trigger' style='color:#a00;'>取消收藏</a>";
var favor_ok = "<p class='favor_ok'>已成功添加到收藏夹<br/><br/> <a href='null/favorites?type=3'>我的收藏夹</a> | <a href='javascript:close_favor()'>关闭</a></p>";
function delete_favor(obi_id, obj_type){
	$('#attention_it').html(favor_add);
	$("#p_attention_count").load("/action/favorite/cancel?type="+obj_type+"&id="+obi_id, {user: ''});
}
function add_to_favor(obj_id, obj_type){
	if(confirm('必须登录后才能收藏，是否现在登录？')){
		location.href="http://www.oschina.net/home/login?goto_page="+encodeURIComponent(location.href);
	}
}
function close_favor(elem_id){
    $('#favor_trigger').poshytip('destroy');
}
function setTag(tv){
	var t = $("._favor_input");
	var value = t.val();
	var tags = value.replace(/，/ig,',').split(',');
	var exist = false;
	value = $.map(tags,function(v,i){
		if($.trim(tv) == $.trim(v)){
			exist = true;
			return undefined;
		}
		return v;
	}).join(',');
	if(exist){
		t.val(value);
		return;
	}
	if(value!="")
		t.val(value+","+tv);
	else
		t.val(tv)
}
function ltrim(str){
    var whitespace = new String(" \t\n\r");
    var s = new String(str);
    if (whitespace.indexOf(s.charAt(0)) != -1){
        var j=0, i = s.length;
        while (j < i && whitespace.indexOf(s.charAt(j)) != -1){
            j++;
        }
        s = s.substring(j, i);
    }
    return s;
}

function rtrim(str){
    var whitespace = new String(" \t\n\r");
    var s = new String(str);
    if (whitespace.indexOf(s.charAt(s.length-1)) != -1){
        var i = s.length - 1;
        while (i >= 0 && whitespace.indexOf(s.charAt(i)) != -1){
            i--;
        }
        s = s.substring(0, i+1);
    }
    return s;
}
 
function trim(str){
    return rtrim(ltrim(str));
}
</script>
<em id='p_attention_count'>0</em>人收藏此文章,
<span id='attention_it'>
	<script type='text/javascript'>document.write(favor_add);</script>
</span>
<script type="text/javascript">
	$(document).ready(function(){
    	$.ajax({
    		url:"/action/favorite/attentionUsersCount",
    		type:"get",
    		data:"id="+182470+"&type="+3,
    		success:function(msg){
				$("#p_attention_count").html(msg);
    		}
    	});
	});
</script>			</span>
			    	</div>
		<div class="tvote" onclick="vote(182470)" title="都有2个人赞过了，你也来赞一下吧！不会扣积分哦！"><em class="vote">赞</em><em class="num vote_count">2</em></div>
      </div>
	  	  <p style='margin:0 0 10px 0;'><a style="color:#A00;font-weight:bold;" href="http://city.oschina.net/xiamen/event/2146082?channel=blog" target="_blank">1月16日厦门 OSC 源创会火热报名中，奖品多多哦</a>&nbsp;&nbsp;<img src='/img/hot3.png?t=1435877996000' align='absmiddle'/></p>
	  
	  	  <a  name="kindeditor" ></a>
	          	            <div class="BlogAnchor">
            <p><em class="corner" id="AnchorContentToggle" title="点击收起目录" style="cursor:pointer;">目录[-]</em></p>
            <div class="AnchorContent" id="AnchorContent"><li class='osc_h2'><a href='#OSC_h2_1'>1 配置</a></li><li class='osc_h2'><a href='#OSC_h2_2'>2 代码编写</a></li><li class='osc_h3'><a href='#OSC_h3_3'>2.1 使用spring</a></li><li class='osc_h3'><a href='#OSC_h3_4'>2.2 不使用spring</a></li><li class='osc_h2'><a href='#OSC_h2_5'>3 监控</a></li><li class='osc_h3'><a href='#OSC_h3_6'>3.1 web监控</a></li><li class='osc_h3'><a href='#OSC_h3_7'>3.2 jconsole监控</a></li><li class='osc_h2'><a href='#OSC_h2_8'>参考</a></li></div>
    	  </div>
          <script>
		  	$(function(){
				$("#AnchorContentToggle").click(function(){
					var text = $(this).html();
					if(text=="目录[-]"){
						$(this).html("目录[+]");
						$(this).attr({"title":"展开"});
					}else{
						$(this).html("目录[-]");
						$(this).attr({"title":"收起"});
					}
					$("#AnchorContent").toggle();
				});
			});
		  </script>
	  	  	  	          <div class='BlogContent'><p> <span style="font-family:'Microsoft YaHei';">java程序很大一部分要操作数据库，为了提高性能操作数据库的时候，有不得不使用数据库连接池。数据库连接池有很多选择，c3p、dhcp、proxool等，druid作为一名后起之秀，凭借其出色的性能，也逐渐印入了大家的眼帘。接下来本教程就说一下druid的简单使用。</span> </p> 
<p> <span style="line-height:24px;"><span style="font-family:'Microsoft YaHei';">&nbsp;首先从<a target="_blank" href="http://repo1.maven.org/maven2/com/alibaba/druid/" rel="nofollow">http://repo1.maven.org/maven2/com/alibaba/druid/</a>&nbsp;下载最新的jar包。如果想使用最新的源码编译，可以从<a target="_blank" href="https://github.com/alibaba/druid" rel="nofollow">https://github.com/alibaba/druid</a>&nbsp;下载源码，然后使用maven命令行，或者导入到eclipse中进行编译。</span></span> </p> 
<span id="OSC_h2_1"></span>
<h2> <a name="t0" rel="nofollow"></a><span style="line-height:24px;"><span style="font-family:'Microsoft YaHei';font-size:14px;">1 配置</span></span> </h2> 
<p> <span style="line-height:24px;"><span style="font-family:'Microsoft YaHei';">和dbcp类似，druid的配置项如下</span></span> </p> 
<p> <span style="line-height:24px;"><span style="font-family:'Microsoft YaHei';"></span></span> </p> 
<table style="color:#333333;font-size:14px;background-color:#FFFFFF;padding:0px;border:0px;font-family:Helvetica, arial, freesans, clean, sans-serif;"> 
 <tbody> 
  <tr> 
   <td style="border:1px solid #CCCCCC;"> 配置 </td> 
   <td style="border:1px solid #CCCCCC;"> 缺省值 </td> 
   <td style="border:1px solid #CCCCCC;"> 说明 </td> 
  </tr> 
  <tr> 
   <td style="border:1px solid #CCCCCC;"> name </td> 
   <td style="border:1px solid #CCCCCC;"> &nbsp; </td> 
   <td style="border:1px solid #CCCCCC;"> 配置这个属性的意义在于，如果存在多个数据源，监控的时候<br> 可以通过名字来区分开来。如果没有配置，将会生成一个名字，<br> 格式是："DataSource-" + System.identityHashCode(this) </td> 
  </tr> 
  <tr> 
   <td style="border:1px solid #CCCCCC;"> jdbcUrl </td> 
   <td style="border:1px solid #CCCCCC;"> &nbsp; </td> 
   <td style="border:1px solid #CCCCCC;"> 连接数据库的url，不同数据库不一样。例如：<br> mysql : jdbc:mysql://10.20.153.104:3306/druid2&nbsp;<br> oracle : jdbc:oracle:thin:@10.20.149.85:1521:ocnauto </td> 
  </tr> 
  <tr> 
   <td style="border:1px solid #CCCCCC;"> username </td> 
   <td style="border:1px solid #CCCCCC;"> &nbsp; </td> 
   <td style="border:1px solid #CCCCCC;"> 连接数据库的用户名 </td> 
  </tr> 
  <tr> 
   <td style="border:1px solid #CCCCCC;"> password </td> 
   <td style="border:1px solid #CCCCCC;"> &nbsp; </td> 
   <td style="border:1px solid #CCCCCC;"> 连接数据库的密码。如果你不希望密码直接写在配置文件中，<br> 可以使用ConfigFilter。详细看这里：<br> <span style="font-family:Helvetica, arial, freesans, clean, sans-serif;line-height:22px;"><span style="font-size:10px;"><a target="_blank" href="https://github.com/alibaba/druid/wiki/%E4%BD%BF%E7%94%A8ConfigFilter" rel="nofollow">https://github.com/alibaba/druid/wiki/%E4%BD%BF%E7%94%A8ConfigFilter</a></span></span> </td> 
  </tr> 
  <tr> 
   <td style="border:1px solid #CCCCCC;"> driverClassName </td> 
   <td style="border:1px solid #CCCCCC;"> 根据url自动识别 </td> 
   <td style="border:1px solid #CCCCCC;"> 这一项可配可不配，如果不配置druid会根据url自动识别dbType，<br> 然后选择相应的driverClassName </td> 
  </tr> 
  <tr> 
   <td style="border:1px solid #CCCCCC;"> initialSize </td> 
   <td style="border:1px solid #CCCCCC;"> 0 </td> 
   <td style="border:1px solid #CCCCCC;"> 初始化时建立物理连接的个数。初始化发生在显示调用init方法，<br> 或者第一次getConnection时 </td> 
  </tr> 
  <tr> 
   <td style="border:1px solid #CCCCCC;"> maxActive </td> 
   <td style="border:1px solid #CCCCCC;"> 8 </td> 
   <td style="border:1px solid #CCCCCC;"> 最大连接池数量 </td> 
  </tr> 
  <tr> 
   <td style="border:1px solid #CCCCCC;"> maxIdle </td> 
   <td style="border:1px solid #CCCCCC;"> 8 </td> 
   <td style="border:1px solid #CCCCCC;"> 已经不再使用，配置了也没效果 </td> 
  </tr> 
  <tr> 
   <td style="border:1px solid #CCCCCC;"> minIdle </td> 
   <td style="border:1px solid #CCCCCC;"> &nbsp; </td> 
   <td style="border:1px solid #CCCCCC;"> 最小连接池数量 </td> 
  </tr> 
  <tr> 
   <td style="border:1px solid #CCCCCC;"> maxWait </td> 
   <td style="border:1px solid #CCCCCC;"> &nbsp; </td> 
   <td style="border:1px solid #CCCCCC;"> 获取连接时最大等待时间，单位毫秒。配置了maxWait之后，<br> 缺省启用公平锁，并发效率会有所下降，<br> 如果需要可以通过配置useUnfairLock属性为true使用非公平锁。 </td> 
  </tr> 
  <tr> 
   <td style="border:1px solid #CCCCCC;"> poolPreparedStatements </td> 
   <td style="border:1px solid #CCCCCC;"> false </td> 
   <td style="border:1px solid #CCCCCC;"> 是否缓存preparedStatement，也就是PSCache。<br> PSCache对支持游标的数据库性能提升巨大，比如说oracle。<br> 在mysql5.5以下的版本中没有<span style="line-height:22px;">PSCache功能，建议关闭掉。<br> 5.5及以上版本有PSCache，建议开启。</span> </td> 
  </tr> 
  <tr> 
   <td style="border:1px solid #CCCCCC;"> maxOpenPreparedStatements </td> 
   <td style="border:1px solid #CCCCCC;"> -1 </td> 
   <td style="border:1px solid #CCCCCC;"> 要启用PSCache，必须配置大于0，当大于0时，<br> poolPreparedStatements自动触发修改为true。<br> 在Druid中，不会存在Oracle下PSCache占用内存过多的问题，<br> 可以把这个数值配置大一些，比如说100 </td> 
  </tr> 
  <tr> 
   <td style="border:1px solid #CCCCCC;"> validationQuery </td> 
   <td style="border:1px solid #CCCCCC;"> &nbsp; </td> 
   <td style="border:1px solid #CCCCCC;"> 用来检测连接是否有效的sql，要求是一个查询语句。<br> 如果validationQuery为null，testOnBorrow、testOnReturn、<br> testWhileIdle都不会其作用。 </td> 
  </tr> 
  <tr> 
   <td style="border:1px solid #CCCCCC;"> testOnBorrow </td> 
   <td style="border:1px solid #CCCCCC;"> true </td> 
   <td style="border:1px solid #CCCCCC;"> 申请连接时执行validationQuery检测连接是否有效，<br> 做了这个配置会降低性能。 </td> 
  </tr> 
  <tr> 
   <td style="border:1px solid #CCCCCC;"> testOnReturn </td> 
   <td style="border:1px solid #CCCCCC;"> false </td> 
   <td style="border:1px solid #CCCCCC;"> 归还连接时执行validationQuery检测连接是否有效，<br> 做了这个配置会降低性能 </td> 
  </tr> 
  <tr> 
   <td style="border:1px solid #CCCCCC;"> testWhileIdle </td> 
   <td style="border:1px solid #CCCCCC;"> false </td> 
   <td style="border:1px solid #CCCCCC;"> 建议配置为true，不影响性能，并且保证安全性。<br> 申请连接的时候检测，如果空闲时间大于<br> timeBetweenEvictionRunsMillis，<br> 执行validationQuery检测连接是否有效。 </td> 
  </tr> 
  <tr> 
   <td style="border:1px solid #CCCCCC;"> timeBetweenEvictionRunsMillis </td> 
   <td style="border:1px solid #CCCCCC;"> &nbsp; </td> 
   <td style="border:1px solid #CCCCCC;"> 有两个含义：<br> 1) Destroy线程会检测连接的间隔时间<br> &nbsp;2) testWhileIdle的判断依据，详细看testWhileIdle属性的说明 </td> 
  </tr> 
  <tr> 
   <td style="border:1px solid #CCCCCC;"> numTestsPerEvictionRun </td> 
   <td style="border:1px solid #CCCCCC;"> &nbsp; </td> 
   <td style="border:1px solid #CCCCCC;"> 不再使用，一个DruidDataSource只支持一个EvictionRun </td> 
  </tr> 
  <tr> 
   <td style="border:1px solid #CCCCCC;"> minEvictableIdleTimeMillis </td> 
   <td style="border:1px solid #CCCCCC;"> &nbsp; </td> 
   <td style="border:1px solid #CCCCCC;"> &nbsp; </td> 
  </tr> 
  <tr> 
   <td style="border:1px solid #CCCCCC;"> connectionInitSqls </td> 
   <td style="border:1px solid #CCCCCC;"> &nbsp; </td> 
   <td style="border:1px solid #CCCCCC;"> 物理连接初始化的时候执行的sql </td> 
  </tr> 
  <tr> 
   <td style="border:1px solid #CCCCCC;"> exceptionSorter </td> 
   <td style="border:1px solid #CCCCCC;"> 根据dbType自动识别 </td> 
   <td style="border:1px solid #CCCCCC;"> 当数据库抛出一些不可恢复的异常时，抛弃连接 </td> 
  </tr> 
  <tr> 
   <td style="border:1px solid #CCCCCC;"> filters </td> 
   <td style="border:1px solid #CCCCCC;"> &nbsp; </td> 
   <td style="border:1px solid #CCCCCC;"> 属性类型是字符串，通过别名的方式配置扩展插件，<br> 常用的插件有：<br> 监控统计用的filter:stat&nbsp;<br> 日志用的filter:log4j<br> &nbsp;防御sql注入的filter:wall </td> 
  </tr> 
  <tr> 
   <td style="border:1px solid #CCCCCC;"> proxyFilters </td> 
   <td style="border:1px solid #CCCCCC;"> &nbsp; </td> 
   <td style="border:1px solid #CCCCCC;"> 类型是List&lt;com.alibaba.druid.filter.Filter&gt;，<br> 如果同时配置了filters和proxyFilters，<br> 是组合关系，并非替换关系 </td> 
  </tr> 
 </tbody> 
</table> 
<span style="color:#333333;font-size:14px;line-height:26px;background-color:#FFFFFF;font-family:'Microsoft YaHei';"><strong>表1.1 配置属性</strong></span> 
<p> <span style="line-height:24px;"><span style="font-family:'Microsoft YaHei';">根据常用的配置属性，首先给出一个如下的配置文件，放置于src目录下。</span></span> </p> 
<div> 
 <div> 
  <div> 
   <b>[plain]</b>&nbsp; 
   <a href="http://blog.csdn.net/yunnysunny/article/details/8657095?ADUIN=188123642&amp;ADSESSION=1386485359&amp;ADTAG=CLIENT.QQ.5275_.0&amp;ADPUBNO=26274#" rel="nofollow">view plain</a> 
   <a href="http://blog.csdn.net/yunnysunny/article/details/8657095?ADUIN=188123642&amp;ADSESSION=1386485359&amp;ADTAG=CLIENT.QQ.5275_.0&amp;ADPUBNO=26274#" rel="nofollow">copy</a> 
   <div> 
   </div> 
  </div> 
 </div> 
 <ol> 
  <li> <span style="color:black;background-color:inherit;"><span style="background-color:inherit;">url:jdbc:mysql://localhost:3306/dragoon_v25_masterdb&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">driverClassName:com.mysql.jdbc.Driver&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">username:root&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">password:aaaaaaaa&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">filters:stat&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">maxActive:20&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">initialSize:1&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">maxWait:60000&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">minIdle:10&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">#maxIdle:15&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">timeBetweenEvictionRunsMillis:60000&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">minEvictableIdleTimeMillis:300000&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">validationQuery:SELECT&nbsp;'x'&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">testWhileIdle:true&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">testOnBorrow:false&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">testOnReturn:false&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">#poolPreparedStatements:true&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">maxOpenPreparedStatements:20&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">#对于长时间不使用的连接强制关闭&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">removeAbandoned:true&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">#超过30分钟开始关闭空闲连接&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">removeAbandonedTimeout:1800&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">#将当前关闭动作记录到日志&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">logAbandoned:true&nbsp;&nbsp;</span> </li> 
 </ol> 
</div> 
<p> <strong>配置文件1.1&nbsp;</strong> </p> 
<p> 配置项中指定了各个参数后，在连接池内部是这么使用这些参数的。数据库连接池在初始化的时候会创建initialSize个连接，当有数据库操作时，会从池中取出一个连接。如果当前池中正在使用的连接数等于maxActive，则会等待一段时间，等待其他操作释放掉某一个连接，如果这个等待时间超过了maxWait，则会报错；如果当前正在使用的连接数没有达到<span style="font-family:'Times New Roman';">maxActive</span><span style="font-family:宋体;">，则判断当前是否空闲连接，如果有则直接使用空闲连接，如果没有则新建立一个连接。在连接使用完毕后，不是将其物理连接关闭，而是将其放入池中等待其他操作复用。</span> </p> 
<p> <span style="font-family:宋体;">同时连接池内部有机制判断，如果当前的总的连接数少于miniIdle，则会建立新的空闲连接，以保证连接数得到miniIdle。如果当前连接池中某个连接在空闲了</span><span style="font-family:宋体;">timeBetweenEvictionRunsMillis时间后任然没有使用，则被物理性的关闭掉。有些数据库连接的时候有超时限制（mysql连接在8小时后断开），或者由于网络中断等原因，连接池的连接会出现失效的情况，这时候设置一个</span><span style="font-family:宋体;">testWhileIdle参数为true，可以保证连接池内部定时检测连接的可用性，不可用的连接会被抛弃或者重建，最大情况的保证从连接池中得到的Connection对象是可用的。当然，为了保证绝对的可用性，你也可以使用testOnBorrow为true（即在获取Connection对象时检测其可用性），不过这样会影响性能。</span> </p> 
<span id="OSC_h2_2"></span>
<h2> <a name="t1" rel="nofollow"></a><span style="font-family:'Microsoft YaHei';">2 代码编写</span> </h2> 
<span id="OSC_h3_3"></span>
<h3> <a name="t2" rel="nofollow"></a><span style="font-family:'Microsoft YaHei';">2.1 使用spring</span> </h3> 
<p> <span style="font-family:'Microsoft YaHei';">首先给出spring配置文件</span> </p> 
<p> <span style="font-family:'Microsoft YaHei';"></span> </p> 
<div> 
 <div> 
  <div> 
   <b>[html]</b>&nbsp; 
   <a href="http://blog.csdn.net/yunnysunny/article/details/8657095?ADUIN=188123642&amp;ADSESSION=1386485359&amp;ADTAG=CLIENT.QQ.5275_.0&amp;ADPUBNO=26274#" rel="nofollow">view plain</a> 
   <a href="http://blog.csdn.net/yunnysunny/article/details/8657095?ADUIN=188123642&amp;ADSESSION=1386485359&amp;ADTAG=CLIENT.QQ.5275_.0&amp;ADPUBNO=26274#" rel="nofollow">copy</a> 
   <div> 
   </div> 
  </div> 
 </div> 
 <ol> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;?</span><span style="color:#993300;background-color:inherit;font-weight:bold;">xml</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">version</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"1.0"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">encoding</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"UTF-8"</span><span style="color:#993300;background-color:inherit;font-weight:bold;">?&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">beans</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">xmlns</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"http://www.springframework.org/schema/beans"</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:red;background-color:inherit;">xmlns:xsi</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"http://www.w3.org/2001/XMLSchema-instance"</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:red;background-color:inherit;">xsi:schemaLocation</span><span style="background-color:inherit;">="http://www.springframework.org/schema/mvc&nbsp;http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/beans&nbsp;http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/context&nbsp;http://www.springframework.org/schema/context/spring-context-3.0.xsd"<span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;background-color:inherit;">&lt;!--&nbsp;给web使用的spring文件&nbsp;--&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">bean</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">id</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"propertyConfigurer"</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:red;background-color:inherit;">class</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"locations"</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">list</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">value</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">/WEB-INF/classes/dbconfig.properties</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;/</span><span style="color:#993300;background-color:inherit;font-weight:bold;">value</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;/</span><span style="color:#993300;background-color:inherit;font-weight:bold;">list</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;/</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;/</span><span style="color:#993300;background-color:inherit;font-weight:bold;">bean</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">bean</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">id</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"dataSource"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">class</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"com.alibaba.druid.pool.DruidDataSource"</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:red;background-color:inherit;">destroy-method</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"close"</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"url"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${url}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"username"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${username}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"password"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${password}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"driverClassName"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${driverClassName}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"filters"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${filters}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"maxActive"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${maxActive}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"initialSize"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${initialSize}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"maxWait"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${maxWait}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"minIdle"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${minIdle}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"timeBetweenEvictionRunsMillis"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${timeBetweenEvictionRunsMillis}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"minEvictableIdleTimeMillis"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${minEvictableIdleTimeMillis}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"validationQuery"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${validationQuery}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"testWhileIdle"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${testWhileIdle}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"testOnBorrow"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${testOnBorrow}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"testOnReturn"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${testOnReturn}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"maxOpenPreparedStatements"</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${maxOpenPreparedStatements}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"removeAbandoned"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${removeAbandoned}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#008200;background-color:inherit;">&lt;!--&nbsp;打开removeAbandoned功能&nbsp;--&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"removeAbandonedTimeout"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${removeAbandonedTimeout}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#008200;background-color:inherit;">&lt;!--&nbsp;1800秒，也就是30分钟&nbsp;--&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"logAbandoned"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${logAbandoned}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#008200;background-color:inherit;">&lt;!--&nbsp;关闭abanded连接时输出错误日志&nbsp;--&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;/</span><span style="color:#993300;background-color:inherit;font-weight:bold;">bean</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">bean</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">id</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"dataSourceDbcp"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">class</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"org.apache.commons.dbcp.BasicDataSource"</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:red;background-color:inherit;">destroy-method</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"close"</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"driverClassName"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${driverClassName}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"url"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${url}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"username"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${username}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"password"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${password}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"maxActive"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${maxActive}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"minIdle"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${minIdle}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"maxWait"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${maxWait}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"defaultAutoCommit"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"true"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"timeBetweenEvictionRunsMillis"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${timeBetweenEvictionRunsMillis}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"minEvictableIdleTimeMillis"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${minEvictableIdleTimeMillis}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"validationQuery"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${validationQuery}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"testWhileIdle"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${testWhileIdle}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"testOnBorrow"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${testOnBorrow}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"testOnReturn"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${testOnReturn}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"maxOpenPreparedStatements"</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${maxOpenPreparedStatements}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"removeAbandoned"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${removeAbandoned}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"removeAbandonedTimeout"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${removeAbandonedTimeout}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"logAbandoned"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">value</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"${logAbandoned}"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;/</span><span style="color:#993300;background-color:inherit;font-weight:bold;">bean</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;background-color:inherit;">&lt;!--&nbsp;jdbcTemplate&nbsp;--&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">bean</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">id</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"jdbc"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">class</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"org.springframework.jdbc.core.JdbcTemplate"</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"dataSource"</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">ref</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">bean</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"dataSource"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;/</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;/</span><span style="color:#993300;background-color:inherit;font-weight:bold;">bean</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">bean</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">id</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"SpringTableOperatorBean"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">class</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"com.whyun.druid.model.TableOperator"</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:red;background-color:inherit;">scope</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"prototype"</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">name</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"dataSource"</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">ref</span><span style="background-color:inherit;">&nbsp;</span><span style="color:red;background-color:inherit;">bean</span><span style="background-color:inherit;">=</span><span style="color:blue;background-color:inherit;">"dataSource"</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">/&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;/</span><span style="color:#993300;background-color:inherit;font-weight:bold;">property</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;/</span><span style="color:#993300;background-color:inherit;font-weight:bold;">bean</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;/</span><span style="color:#993300;background-color:inherit;font-weight:bold;">beans</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
 </ol> 
</div> 
<br> 
<br> 
<p> <strong>配置文件2.1</strong> </p> 
<p> 其中第一个bean中给出的配置文件/WEB-INF/classes/dbconfig.properties就是第1节中给出的配置文件。我这里还特地给出dbcp的spring配置项，目的就是将两者进行对比，方便大家进行迁移。这里没有使用JdbcTemplate，所以jdbc那个bean没有使用到。下面给出com.whyun.druid.model.TableOperator类的代码。 </p> 
<div> 
 <div> 
  <div> 
   <b>[java]</b>&nbsp; 
   <a href="http://blog.csdn.net/yunnysunny/article/details/8657095?ADUIN=188123642&amp;ADSESSION=1386485359&amp;ADTAG=CLIENT.QQ.5275_.0&amp;ADPUBNO=26274#" rel="nofollow">view plain</a> 
   <a href="http://blog.csdn.net/yunnysunny/article/details/8657095?ADUIN=188123642&amp;ADSESSION=1386485359&amp;ADTAG=CLIENT.QQ.5275_.0&amp;ADPUBNO=26274#" rel="nofollow">copy</a> 
   <div> 
   </div> 
  </div> 
 </div> 
 <ol> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">package</span><span style="background-color:inherit;">&nbsp;com.whyun.druid.model;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;java.sql.Connection;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;java.sql.PreparedStatement;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;java.sql.SQLException;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;java.sql.Statement;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;javax.sql.DataSource;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">public</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">class</span><span style="background-color:inherit;">&nbsp;TableOperator&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">private</span><span style="background-color:inherit;">&nbsp;DataSource&nbsp;dataSource;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">public</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">void</span><span style="background-color:inherit;">&nbsp;setDataSource(DataSource&nbsp;dataSource)&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">this</span><span style="background-color:inherit;">.dataSource&nbsp;=&nbsp;dataSource;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">private</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">static</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">final</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">int</span><span style="background-color:inherit;">&nbsp;COUNT&nbsp;=&nbsp;</span><span style="color:#C00000;background-color:inherit;">800</span><span style="background-color:inherit;">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">public</span><span style="background-color:inherit;">&nbsp;TableOperator()&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">public</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">void</span><span style="background-color:inherit;">&nbsp;tearDown()&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">throws</span><span style="background-color:inherit;">&nbsp;Exception&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">try</span><span style="background-color:inherit;">&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dropTable();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">catch</span><span style="background-color:inherit;">&nbsp;(SQLException&nbsp;e)&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">public</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">void</span><span style="background-color:inherit;">&nbsp;insert()&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">throws</span><span style="background-color:inherit;">&nbsp;Exception&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StringBuffer&nbsp;ddl&nbsp;=&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">new</span><span style="background-color:inherit;">&nbsp;StringBuffer();&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ddl.append(<span style="color:blue;background-color:inherit;">"INSERT&nbsp;INTO&nbsp;t_big&nbsp;("</span><span style="background-color:inherit;">);&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">for</span><span style="background-color:inherit;">&nbsp;(</span><span style="color:#006699;background-color:inherit;font-weight:bold;">int</span><span style="background-color:inherit;">&nbsp;i&nbsp;=&nbsp;</span><span style="color:#C00000;background-color:inherit;">0</span><span style="background-color:inherit;">;&nbsp;i&nbsp;&lt;&nbsp;COUNT;&nbsp;++i)&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">if</span><span style="background-color:inherit;">&nbsp;(i&nbsp;!=&nbsp;</span><span style="color:#C00000;background-color:inherit;">0</span><span style="background-color:inherit;">)&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ddl.append(<span style="color:blue;background-color:inherit;">",&nbsp;"</span><span style="background-color:inherit;">);&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ddl.append(<span style="color:blue;background-color:inherit;">"F"</span><span style="background-color:inherit;">&nbsp;+&nbsp;i);&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ddl.append(<span style="color:blue;background-color:inherit;">")&nbsp;VALUES&nbsp;("</span><span style="background-color:inherit;">);&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">for</span><span style="background-color:inherit;">&nbsp;(</span><span style="color:#006699;background-color:inherit;font-weight:bold;">int</span><span style="background-color:inherit;">&nbsp;i&nbsp;=&nbsp;</span><span style="color:#C00000;background-color:inherit;">0</span><span style="background-color:inherit;">;&nbsp;i&nbsp;&lt;&nbsp;COUNT;&nbsp;++i)&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">if</span><span style="background-color:inherit;">&nbsp;(i&nbsp;!=&nbsp;</span><span style="color:#C00000;background-color:inherit;">0</span><span style="background-color:inherit;">)&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ddl.append(<span style="color:blue;background-color:inherit;">",&nbsp;"</span><span style="background-color:inherit;">);&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ddl.append(<span style="color:blue;background-color:inherit;">"?"</span><span style="background-color:inherit;">);&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ddl.append(<span style="color:blue;background-color:inherit;">")"</span><span style="background-color:inherit;">);&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Connection&nbsp;conn&nbsp;=&nbsp;dataSource.getConnection();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(ddl.toString());</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PreparedStatement&nbsp;stmt&nbsp;=&nbsp;conn.prepareStatement(ddl.toString());&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">for</span><span style="background-color:inherit;">&nbsp;(</span><span style="color:#006699;background-color:inherit;font-weight:bold;">int</span><span style="background-color:inherit;">&nbsp;i&nbsp;=&nbsp;</span><span style="color:#C00000;background-color:inherit;">0</span><span style="background-color:inherit;">;&nbsp;i&nbsp;&lt;&nbsp;COUNT;&nbsp;++i)&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stmt.setInt(i&nbsp;+&nbsp;<span style="color:#C00000;background-color:inherit;">1</span><span style="background-color:inherit;">,&nbsp;i);&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stmt.execute();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stmt.close();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn.close();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">private</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">void</span><span style="background-color:inherit;">&nbsp;dropTable()&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">throws</span><span style="background-color:inherit;">&nbsp;SQLException&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Connection&nbsp;conn&nbsp;=&nbsp;dataSource.getConnection();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Statement&nbsp;stmt&nbsp;=&nbsp;conn.createStatement();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stmt.execute(<span style="color:blue;background-color:inherit;">"DROP&nbsp;TABLE&nbsp;t_big"</span><span style="background-color:inherit;">);&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stmt.close();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn.close();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">public</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">void</span><span style="background-color:inherit;">&nbsp;createTable()&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">throws</span><span style="background-color:inherit;">&nbsp;SQLException&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StringBuffer&nbsp;ddl&nbsp;=&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">new</span><span style="background-color:inherit;">&nbsp;StringBuffer();&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ddl.append(<span style="color:blue;background-color:inherit;">"CREATE&nbsp;TABLE&nbsp;t_big&nbsp;(FID&nbsp;INT&nbsp;AUTO_INCREMENT&nbsp;PRIMARY&nbsp;KEY&nbsp;"</span><span style="background-color:inherit;">);&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">for</span><span style="background-color:inherit;">&nbsp;(</span><span style="color:#006699;background-color:inherit;font-weight:bold;">int</span><span style="background-color:inherit;">&nbsp;i&nbsp;=&nbsp;</span><span style="color:#C00000;background-color:inherit;">0</span><span style="background-color:inherit;">;&nbsp;i&nbsp;&lt;&nbsp;COUNT;&nbsp;++i)&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ddl.append(<span style="color:blue;background-color:inherit;">",&nbsp;"</span><span style="background-color:inherit;">);&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ddl.append(<span style="color:blue;background-color:inherit;">"F"</span><span style="background-color:inherit;">&nbsp;+&nbsp;i);&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ddl.append(<span style="color:blue;background-color:inherit;">"&nbsp;BIGINT&nbsp;NULL"</span><span style="background-color:inherit;">);&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ddl.append(<span style="color:blue;background-color:inherit;">")"</span><span style="background-color:inherit;">);&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Connection&nbsp;conn&nbsp;=&nbsp;dataSource.getConnection();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Statement&nbsp;stmt&nbsp;=&nbsp;conn.createStatement();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stmt.execute(ddl.toString());&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stmt.close();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn.close();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">}&nbsp;&nbsp;</span> </li> 
 </ol> 
</div> 
<p> <strong>代码片段2.1</strong> </p> 
<p> <strong>注意：<span style="font-family:'Microsoft YaHei';">在使用的时候，通过获取完Connection对象，在使用完之后，要将其close掉，这样其实是将用完的连接放入到连接池中，如果你不close的话，会造成连接泄露。</span></strong> </p> 
<span style="color:#333333;font-family:Arial;font-size:14px;line-height:26px;background-color:#FFFFFF;">然后我们写一个servlet来测试他.</span> 
<div> 
 <div> 
  <div> 
   <b>[java]</b>&nbsp; 
   <a href="http://blog.csdn.net/yunnysunny/article/details/8657095?ADUIN=188123642&amp;ADSESSION=1386485359&amp;ADTAG=CLIENT.QQ.5275_.0&amp;ADPUBNO=26274#" rel="nofollow">view plain</a> 
   <a href="http://blog.csdn.net/yunnysunny/article/details/8657095?ADUIN=188123642&amp;ADSESSION=1386485359&amp;ADTAG=CLIENT.QQ.5275_.0&amp;ADPUBNO=26274#" rel="nofollow">copy</a> 
   <div> 
   </div> 
  </div> 
 </div> 
 <ol> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">package</span><span style="background-color:inherit;">&nbsp;com.whyun.druid.servelt;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;java.io.IOException;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;java.io.PrintWriter;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;java.sql.SQLException;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;javax.servlet.ServletContext;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;javax.servlet.ServletException;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;javax.servlet.http.HttpServlet;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;javax.servlet.http.HttpServletRequest;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;javax.servlet.http.HttpServletResponse;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;org.springframework.web.context.WebApplicationContext;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;org.springframework.web.context.support.WebApplicationContextUtils;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;com.whyun.druid.model.TableOperator;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">public</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">class</span><span style="background-color:inherit;">&nbsp;TestServlet&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">extends</span><span style="background-color:inherit;">&nbsp;HttpServlet&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">private</span><span style="background-color:inherit;">&nbsp;TableOperator&nbsp;operator;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#646464;background-color:inherit;">@Override</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">public</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">void</span><span style="background-color:inherit;">&nbsp;init()&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">throws</span><span style="background-color:inherit;">&nbsp;ServletException&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">super</span><span style="background-color:inherit;">.init();&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ServletContext&nbsp;servletContext&nbsp;=&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">this</span><span style="background-color:inherit;">.getServletContext();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WebApplicationContext&nbsp;ctx&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;WebApplicationContextUtils.getWebApplicationContext(servletContext);&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;operator&nbsp;=&nbsp;(TableOperator)ctx.getBean(<span style="color:blue;background-color:inherit;">"SpringTableOperatorBean"</span><span style="background-color:inherit;">);&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;background-color:inherit;">/**</span>&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;doGet&nbsp;method&nbsp;of&nbsp;the&nbsp;servlet.&nbsp;&lt;br&gt;</span>&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span>&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;This&nbsp;method&nbsp;is&nbsp;called&nbsp;when&nbsp;a&nbsp;form&nbsp;has&nbsp;its&nbsp;tag&nbsp;value&nbsp;method&nbsp;equals&nbsp;to&nbsp;get.</span>&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;</span>&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;request&nbsp;the&nbsp;request&nbsp;send&nbsp;by&nbsp;the&nbsp;client&nbsp;to&nbsp;the&nbsp;server</span>&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;response&nbsp;the&nbsp;response&nbsp;send&nbsp;by&nbsp;the&nbsp;server&nbsp;to&nbsp;the&nbsp;client</span>&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;ServletException&nbsp;if&nbsp;an&nbsp;error&nbsp;occurred</span>&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;IOException&nbsp;if&nbsp;an&nbsp;error&nbsp;occurred</span>&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">public</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">void</span><span style="background-color:inherit;">&nbsp;doGet(HttpServletRequest&nbsp;request,&nbsp;HttpServletResponse&nbsp;response)&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">throws</span><span style="background-color:inherit;">&nbsp;ServletException,&nbsp;IOException&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response.setContentType(<span style="color:blue;background-color:inherit;">"text/html"</span><span style="background-color:inherit;">);&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PrintWriter&nbsp;out&nbsp;=&nbsp;response.getWriter();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">boolean</span><span style="background-color:inherit;">&nbsp;createResult&nbsp;=&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">false</span><span style="background-color:inherit;">;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">boolean</span><span style="background-color:inherit;">&nbsp;insertResult&nbsp;=&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">false</span><span style="background-color:inherit;">;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">boolean</span><span style="background-color:inherit;">&nbsp;dropResult&nbsp;=&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">false</span><span style="background-color:inherit;">;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">try</span><span style="background-color:inherit;">&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;operator.createTable();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;createResult&nbsp;=&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">true</span><span style="background-color:inherit;">;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">catch</span><span style="background-color:inherit;">&nbsp;(SQLException&nbsp;e)&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">if</span><span style="background-color:inherit;">&nbsp;(createResult)&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">try</span><span style="background-color:inherit;">&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;operator.insert();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;insertResult&nbsp;=&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">true</span><span style="background-color:inherit;">;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">catch</span><span style="background-color:inherit;">&nbsp;(Exception&nbsp;e)&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">try</span><span style="background-color:inherit;">&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;operator.tearDown();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dropResult&nbsp;=&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">true</span><span style="background-color:inherit;">;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">catch</span><span style="background-color:inherit;">&nbsp;(Exception&nbsp;e)&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out.println(<span style="color:blue;background-color:inherit;">"{'createResult':"</span><span style="background-color:inherit;">+createResult+</span><span style="color:blue;background-color:inherit;">",'insertResult':"</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+insertResult+<span style="color:blue;background-color:inherit;">",'dropResult':"</span><span style="background-color:inherit;">+dropResult+</span><span style="color:blue;background-color:inherit;">"}"</span><span style="background-color:inherit;">);&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out.flush();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out.close();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">}&nbsp;&nbsp;</span> </li> 
 </ol> 
</div> 
<strong>代码片段2.2</strong> 
<span style="color:#333333;font-family:Arial;font-size:14px;line-height:26px;background-color:#FFFFFF;"></span> 
<p> <span style="font-family:'Microsoft YaHei';">这里没有用到struts2或者springmvc，虽然大部分开发者用的是这两种框架。</span> </p> 
<p> <span style="font-family:'Microsoft YaHei';"></span> </p> 
<span id="OSC_h3_4"></span>
<h3> <a name="t3" rel="nofollow"></a><span style="font-family:'Microsoft YaHei';">2.2 不使用spring</span> </h3> 
<p> <span style="font-family:'Microsoft YaHei';">类似于dbcp，druid也提供了原生态的支持。这里仅仅列出来了如何获取一个DataSource对象，实际使用中要将获取DataSource的过程封装到一个单体模式类中。先看下面这段代码：</span> </p> 
<p> <span style="font-family:'Microsoft YaHei';"></span> </p> 
<div> 
 <div> 
  <div> 
   <b>[java]</b>&nbsp; 
   <a href="http://blog.csdn.net/yunnysunny/article/details/8657095?ADUIN=188123642&amp;ADSESSION=1386485359&amp;ADTAG=CLIENT.QQ.5275_.0&amp;ADPUBNO=26274#" rel="nofollow">view plain</a> 
   <a href="http://blog.csdn.net/yunnysunny/article/details/8657095?ADUIN=188123642&amp;ADSESSION=1386485359&amp;ADTAG=CLIENT.QQ.5275_.0&amp;ADPUBNO=26274#" rel="nofollow">copy</a> 
   <div> 
   </div> 
  </div> 
 </div> 
 <ol> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">package</span><span style="background-color:inherit;">&nbsp;com.whyun.util.db;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;javax.sql.DataSource;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;org.apache.commons.dbcp.BasicDataSourceFactory;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;com.alibaba.druid.pool.DruidDataSourceFactory;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;com.whyun.util.config.MySqlConfigProperty;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;com.whyun.util.config.MySqlConfigProperty2;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;com.whyun.util.db.source.AbstractDataSource;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;com.whyun.util.db.source.impl.DbcpSourceMysql;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;com.whyun.util.db.source.impl.DruidSourceMysql;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;com.whyun.util.db.source.impl.DruidSourceMysql2;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">//&nbsp;TODO:&nbsp;Auto-generated&nbsp;Javadoc</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">/**</span>&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">&nbsp;*&nbsp;The&nbsp;Class&nbsp;DataSourceUtil.</span>&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">&nbsp;*/</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">public</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">class</span><span style="background-color:inherit;">&nbsp;DataSourceUtil&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;background-color:inherit;">/**&nbsp;使用配置文件dbconfig.properties构建Druid数据源.&nbsp;*/</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">public</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">static</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">final</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">int</span><span style="background-color:inherit;">&nbsp;DRUID_MYSQL_SOURCE&nbsp;=&nbsp;</span><span style="color:#C00000;background-color:inherit;">0</span><span style="background-color:inherit;">;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;background-color:inherit;">/**&nbsp;The&nbsp;duird&nbsp;mysql&nbsp;source.&nbsp;*/</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">private</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">static</span><span style="background-color:inherit;">&nbsp;DataSource&nbsp;duirdMysqlSource;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;background-color:inherit;">/**&nbsp;使用配置文件dbconfig2.properties构建Druid数据源.&nbsp;*/</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">public</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">static</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">final</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">int</span><span style="background-color:inherit;">&nbsp;DRUID_MYSQL_SOURCE2&nbsp;=&nbsp;</span><span style="color:#C00000;background-color:inherit;">1</span><span style="background-color:inherit;">;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;background-color:inherit;">/**&nbsp;The&nbsp;druid&nbsp;mysql&nbsp;source2.&nbsp;*/</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">private</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">static</span><span style="background-color:inherit;">&nbsp;DataSource&nbsp;druidMysqlSource2;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;background-color:inherit;">/**&nbsp;使用配置文件dbconfig.properties构建Dbcp数据源.&nbsp;*/</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">public</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">static</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">final</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">int</span><span style="background-color:inherit;">&nbsp;DBCP_SOURCE&nbsp;=&nbsp;</span><span style="color:#C00000;background-color:inherit;">4</span><span style="background-color:inherit;">;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;background-color:inherit;">/**&nbsp;The&nbsp;dbcp&nbsp;source.&nbsp;*/</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">private</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">static</span><span style="background-color:inherit;">&nbsp;&nbsp;DataSource&nbsp;dbcpSource;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;background-color:inherit;">/**</span>&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;根据类型获取数据源.</span>&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span>&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;sourceType&nbsp;数据源类型</span>&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;druid或者dbcp数据源</span>&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;Exception&nbsp;the&nbsp;exception</span>&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@NotThreadSafe</span>&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">public</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">static</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">final</span><span style="background-color:inherit;">&nbsp;DataSource&nbsp;getDataSource(</span><span style="color:#006699;background-color:inherit;font-weight:bold;">int</span><span style="background-color:inherit;">&nbsp;sourceType)&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">throws</span><span style="background-color:inherit;">&nbsp;Exception&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DataSource&nbsp;dataSource&nbsp;=&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">null</span><span style="background-color:inherit;">;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">switch</span><span style="background-color:inherit;">(sourceType)&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">case</span><span style="background-color:inherit;">&nbsp;DRUID_MYSQL_SOURCE:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">if</span><span style="background-color:inherit;">&nbsp;(duirdMysqlSource&nbsp;==&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">null</span><span style="background-color:inherit;">)&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duirdMysqlSource&nbsp;=&nbsp;DruidDataSourceFactory.createDataSource(&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MySqlConfigProperty.getInstance().getProperties());&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataSource&nbsp;=&nbsp;duirdMysqlSource;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">break</span><span style="background-color:inherit;">;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">case</span><span style="background-color:inherit;">&nbsp;DRUID_MYSQL_SOURCE2:&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">if</span><span style="background-color:inherit;">&nbsp;(druidMysqlSource2&nbsp;==&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">null</span><span style="background-color:inherit;">)&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;druidMysqlSource2&nbsp;=&nbsp;DruidDataSourceFactory.createDataSource(&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MySqlConfigProperty2.getInstance().getProperties());&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataSource&nbsp;=&nbsp;druidMysqlSource2;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">break</span><span style="background-color:inherit;">;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">case</span><span style="background-color:inherit;">&nbsp;DBCP_SOURCE:&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">if</span><span style="background-color:inherit;">&nbsp;(dbcpSource&nbsp;==&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">null</span><span style="background-color:inherit;">)&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dbcpSource&nbsp;=&nbsp;BasicDataSourceFactory.createDataSource(&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MySqlConfigProperty.getInstance().getProperties());&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataSource&nbsp;=&nbsp;dbcpSource;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">break</span><span style="background-color:inherit;">;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">return</span><span style="background-color:inherit;">&nbsp;dataSource;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;background-color:inherit;">/**</span>&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;根据数据库类型标示获取DataSource对象，跟{@link&nbsp;com.whyun.util.db.DataSourceUtil#getDataSource(int)}</span>&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;不同的是，这里DataSource获取的时候使用了单体模式</span>&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span>&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;sourceType&nbsp;数据源类型</span>&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;获取到的DataSource对象</span>&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;Exception&nbsp;the&nbsp;exception</span>&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">public</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">static</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">final</span><span style="background-color:inherit;">&nbsp;DataSource&nbsp;getDataSource2(</span><span style="color:#006699;background-color:inherit;font-weight:bold;">int</span><span style="background-color:inherit;">&nbsp;sourceType)&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">throws</span><span style="background-color:inherit;">&nbsp;Exception&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AbstractDataSource&nbsp;abstractDataSource&nbsp;=&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">null</span><span style="background-color:inherit;">;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">switch</span><span style="background-color:inherit;">(sourceType)&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">case</span><span style="background-color:inherit;">&nbsp;DRUID_MYSQL_SOURCE:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;abstractDataSource&nbsp;=&nbsp;DruidSourceMysql.getInstance();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">break</span><span style="background-color:inherit;">;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">case</span><span style="background-color:inherit;">&nbsp;DRUID_MYSQL_SOURCE2:&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;abstractDataSource&nbsp;=&nbsp;DruidSourceMysql2.getInstance();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">break</span><span style="background-color:inherit;">;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">case</span><span style="background-color:inherit;">&nbsp;DBCP_SOURCE:&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;abstractDataSource&nbsp;=&nbsp;DbcpSourceMysql.getInstance();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">break</span><span style="background-color:inherit;">;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">return</span><span style="background-color:inherit;">&nbsp;abstractDataSource&nbsp;==&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">null</span><span style="background-color:inherit;">&nbsp;?&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">null</span><span style="background-color:inherit;">&nbsp;:&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;abstractDataSource.getDataSource();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">}&nbsp;&nbsp;</span> </li> 
 </ol> 
</div> 
<br> 
<span style="color:#333333;font-size:14px;line-height:26px;background-color:#FFFFFF;font-family:'Microsoft YaHei';"><strong>代码片段2.3 手动读取配置文件初始化连接池</strong></span> 
<span style="color:#333333;font-family:Arial;font-size:14px;line-height:26px;background-color:#FFFFFF;"></span> 
<p> <span style="font-family:'Microsoft YaHei';">第37行中调用了类com.alibaba.druid.pool.DruidDataSourceFactory中createDataSource方法来初始化一个连接池。对比dbcp的使用方法，两者很相似。</span> </p> 
<p> 下面给出一个多线程的测试程序。运行后可以比较druid和dbcp的性能差别。 </p> 
<div> 
 <div> 
  <div> 
   <b>[java]</b>&nbsp; 
   <a href="http://blog.csdn.net/yunnysunny/article/details/8657095?ADUIN=188123642&amp;ADSESSION=1386485359&amp;ADTAG=CLIENT.QQ.5275_.0&amp;ADPUBNO=26274#" rel="nofollow">view plain</a> 
   <a href="http://blog.csdn.net/yunnysunny/article/details/8657095?ADUIN=188123642&amp;ADSESSION=1386485359&amp;ADTAG=CLIENT.QQ.5275_.0&amp;ADPUBNO=26274#" rel="nofollow">copy</a> 
   <div> 
   </div> 
  </div> 
 </div> 
 <ol> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">package</span><span style="background-color:inherit;">&nbsp;com.whyun.druid.test;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;java.sql.SQLException;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;java.util.ArrayList;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;java.util.List;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;java.util.concurrent.Callable;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;java.util.concurrent.ExecutorService;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;java.util.concurrent.Executors;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;java.util.concurrent.Future;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;java.util.concurrent.TimeUnit;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;com.whyun.druid.model.TableOperator;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">import</span><span style="background-color:inherit;">&nbsp;com.whyun.util.db.DataSourceUtil;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">public</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">class</span><span style="background-color:inherit;">&nbsp;MutilThreadTest&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">public</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">static</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">void</span><span style="background-color:inherit;">&nbsp;test(</span><span style="color:#006699;background-color:inherit;font-weight:bold;">int</span><span style="background-color:inherit;">&nbsp;dbType,&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">int</span><span style="background-color:inherit;">&nbsp;times)&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">throws</span><span style="background-color:inherit;">&nbsp;Exception&nbsp;{&nbsp;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">int</span><span style="background-color:inherit;">&nbsp;numOfThreads&nbsp;=Runtime.getRuntime().availableProcessors()*</span><span style="color:#C00000;background-color:inherit;">2</span><span style="background-color:inherit;">;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ExecutorService&nbsp;executor&nbsp;=&nbsp;Executors.newFixedThreadPool(numOfThreads);&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">final</span><span style="background-color:inherit;">&nbsp;TableOperator&nbsp;test&nbsp;=&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">new</span><span style="background-color:inherit;">&nbsp;TableOperator();&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;dbType&nbsp;=&nbsp;DataSourceUtil.DRUID_MYSQL_SOURCE;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#008200;background-color:inherit;">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dbType&nbsp;=&nbsp;DataSourceUtil.DBCP_SOURCE;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test.setDataSource(DataSourceUtil.getDataSource(dbType));&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">boolean</span><span style="background-color:inherit;">&nbsp;createResult&nbsp;=&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">false</span><span style="background-color:inherit;">;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">try</span><span style="background-color:inherit;">&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test.createTable();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;createResult&nbsp;=&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">true</span><span style="background-color:inherit;">;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">catch</span><span style="background-color:inherit;">&nbsp;(SQLException&nbsp;e)&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">if</span><span style="background-color:inherit;">&nbsp;(createResult)&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&lt;Future&lt;Long&gt;&gt;&nbsp;results&nbsp;=&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">new</span><span style="background-color:inherit;">&nbsp;ArrayList&lt;Future&lt;Long&gt;&gt;();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">for</span><span style="background-color:inherit;">&nbsp;(</span><span style="color:#006699;background-color:inherit;font-weight:bold;">int</span><span style="background-color:inherit;">&nbsp;i&nbsp;=&nbsp;</span><span style="color:#C00000;background-color:inherit;">0</span><span style="background-color:inherit;">;&nbsp;i&nbsp;&lt;&nbsp;times;&nbsp;i++)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;results.add(executor.submit(<span style="color:#006699;background-color:inherit;font-weight:bold;">new</span><span style="background-color:inherit;">&nbsp;Callable&lt;Long&gt;()&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#646464;background-color:inherit;">@Override</span><span style="background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">public</span><span style="background-color:inherit;">&nbsp;Long&nbsp;call()&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">throws</span><span style="background-color:inherit;">&nbsp;Exception&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">long</span><span style="background-color:inherit;">&nbsp;begin&nbsp;=&nbsp;System.currentTimeMillis();&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">try</span><span style="background-color:inherit;">&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test.insert();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;background-color:inherit;">//insertResult&nbsp;=&nbsp;true;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">catch</span><span style="background-color:inherit;">&nbsp;(Exception&nbsp;e)&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">long</span><span style="background-color:inherit;">&nbsp;end&nbsp;=&nbsp;System.currentTimeMillis();&nbsp;&nbsp;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">return</span><span style="background-color:inherit;">&nbsp;end&nbsp;-&nbsp;begin;&nbsp;&nbsp;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}));&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;executor.shutdown();&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">while</span><span style="background-color:inherit;">(!executor.awaitTermination(Long.MAX_VALUE,&nbsp;TimeUnit.DAYS));&nbsp;&nbsp;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">long</span><span style="background-color:inherit;">&nbsp;sum&nbsp;=&nbsp;</span><span style="color:#C00000;background-color:inherit;">0</span><span style="background-color:inherit;">;&nbsp;&nbsp;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">for</span><span style="background-color:inherit;">&nbsp;(Future&lt;Long&gt;&nbsp;result&nbsp;:&nbsp;results)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sum&nbsp;+=&nbsp;result.get();&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span style="color:blue;background-color:inherit;">"---------------db&nbsp;type&nbsp;"</span><span style="background-color:inherit;">+dbType+</span><span style="color:blue;background-color:inherit;">"------------------"</span><span style="background-color:inherit;">);&nbsp;&nbsp;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span style="color:blue;background-color:inherit;">"number&nbsp;of&nbsp;threads&nbsp;:"</span><span style="background-color:inherit;">&nbsp;+&nbsp;numOfThreads&nbsp;+&nbsp;</span><span style="color:blue;background-color:inherit;">"&nbsp;times:"</span><span style="background-color:inherit;">&nbsp;+&nbsp;times);&nbsp;&nbsp;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span style="color:blue;background-color:inherit;">"running&nbsp;time:&nbsp;"</span><span style="background-color:inherit;">&nbsp;+&nbsp;sum&nbsp;+&nbsp;</span><span style="color:blue;background-color:inherit;">"ms"</span><span style="background-color:inherit;">);&nbsp;&nbsp;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span style="color:blue;background-color:inherit;">"TPS:&nbsp;"</span><span style="background-color:inherit;">&nbsp;+&nbsp;(</span><span style="color:#006699;background-color:inherit;font-weight:bold;">double</span><span style="background-color:inherit;">)(</span><span style="color:#C00000;background-color:inherit;">100000</span><span style="background-color:inherit;">&nbsp;*&nbsp;</span><span style="color:#C00000;background-color:inherit;">1000</span><span style="background-color:inherit;">)&nbsp;/&nbsp;(</span><span style="color:#006699;background-color:inherit;font-weight:bold;">double</span><span style="background-color:inherit;">)(sum));&nbsp;&nbsp;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println();&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">try</span><span style="background-color:inherit;">&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test.tearDown();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;background-color:inherit;">//dropResult&nbsp;=&nbsp;true;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">catch</span><span style="background-color:inherit;">&nbsp;(Exception&nbsp;e)&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">else</span><span style="background-color:inherit;">&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span style="color:blue;background-color:inherit;">"初始化数据库失败"</span><span style="background-color:inherit;">);&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">public</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">static</span><span style="background-color:inherit;">&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">void</span><span style="background-color:inherit;">&nbsp;main&nbsp;(String&nbsp;argc[])&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">throws</span><span style="background-color:inherit;">&nbsp;Exception&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test(DataSourceUtil.DBCP_SOURCE,<span style="color:#C00000;background-color:inherit;">50</span><span style="background-color:inherit;">);&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test(DataSourceUtil.DRUID_MYSQL_SOURCE,<span style="color:#C00000;background-color:inherit;">50</span><span style="background-color:inherit;">);&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">}&nbsp;&nbsp;</span> </li> 
 </ol> 
</div> 
<p> <strong>代码片段2.4 连接池多线程测试程序</strong> </p> 
<p> <strong><br> </strong> </p> 
<span id="OSC_h2_5"></span>
<h2> <a name="t4" rel="nofollow"></a><strong>3 监控</strong> </h2> 
<span id="OSC_h3_6"></span>
<h3> <a name="t5" rel="nofollow"></a><strong>3.1 web监控</strong> </h3> 
<p> druid提供了sql语句查询时间等信息的监控功能。为了让数据库查询一直运行，下面特地写了一个ajax进行轮询。同时，还要保证在web.xml中配置如下信息 </p> 
<div> 
 <div> 
  <div> 
   <b>[html]</b>&nbsp; 
   <a href="http://blog.csdn.net/yunnysunny/article/details/8657095?ADUIN=188123642&amp;ADSESSION=1386485359&amp;ADTAG=CLIENT.QQ.5275_.0&amp;ADPUBNO=26274#" rel="nofollow">view plain</a> 
   <a href="http://blog.csdn.net/yunnysunny/article/details/8657095?ADUIN=188123642&amp;ADSESSION=1386485359&amp;ADTAG=CLIENT.QQ.5275_.0&amp;ADPUBNO=26274#" rel="nofollow">copy</a> 
   <div> 
   </div> 
  </div> 
 </div> 
 <ol> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">servlet</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">servlet-name</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">DruidStatView</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;/</span><span style="color:#993300;background-color:inherit;font-weight:bold;">servlet-name</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">servlet-class</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">com.alibaba.druid.support.http.StatViewServlet</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;/</span><span style="color:#993300;background-color:inherit;font-weight:bold;">servlet-class</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;/</span><span style="color:#993300;background-color:inherit;font-weight:bold;">servlet</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">servlet-mapping</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">servlet-name</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">DruidStatView</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;/</span><span style="color:#993300;background-color:inherit;font-weight:bold;">servlet-name</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">url-pattern</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">/druid/*</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;/</span><span style="color:#993300;background-color:inherit;font-weight:bold;">url-pattern</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;/</span><span style="color:#993300;background-color:inherit;font-weight:bold;">servlet-mapping</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
 </ol> 
</div> 
<strong>配置文件3.1 在web.xml中添加druid监控</strong> 
<span style="color:#333333;font-family:Arial;font-size:14px;line-height:26px;background-color:#FFFFFF;"></span> 
<p> <strong><br> </strong>同时将ajax代码提供如下 </p> 
<div> 
 <div> 
  <div> 
   <b>[javascript]</b>&nbsp; 
   <a href="http://blog.csdn.net/yunnysunny/article/details/8657095?ADUIN=188123642&amp;ADSESSION=1386485359&amp;ADTAG=CLIENT.QQ.5275_.0&amp;ADPUBNO=26274#" rel="nofollow">view plain</a> 
   <a href="http://blog.csdn.net/yunnysunny/article/details/8657095?ADUIN=188123642&amp;ADSESSION=1386485359&amp;ADTAG=CLIENT.QQ.5275_.0&amp;ADPUBNO=26274#" rel="nofollow">copy</a> 
   <div> 
   </div> 
  </div> 
 </div> 
 <ol> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#006699;background-color:inherit;font-weight:bold;">function</span><span style="background-color:inherit;">&nbsp;showTime()&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">var</span><span style="background-color:inherit;">&nbsp;myDate&nbsp;=&nbsp;</span><span style="color:#006699;background-color:inherit;font-weight:bold;">new</span><span style="background-color:inherit;">&nbsp;Date();&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">var</span><span style="background-color:inherit;">&nbsp;timeStr&nbsp;=&nbsp;</span><span style="color:blue;background-color:inherit;">''</span><span style="background-color:inherit;">;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;timeStr&nbsp;+=&nbsp;myDate.getFullYear()+<span style="color:blue;background-color:inherit;">'-'</span><span style="background-color:inherit;">;&nbsp;</span><span style="color:#008200;background-color:inherit;">//获取完整的年份(4位,1970-????)</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;timeStr&nbsp;+=&nbsp;myDate.getMonth()+<span style="color:blue;background-color:inherit;">'-'</span><span style="background-color:inherit;">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008200;background-color:inherit;">//获取当前月份(0-11,0代表1月)</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;timeStr&nbsp;+=&nbsp;myDate.getDate()&nbsp;+&nbsp;<span style="color:blue;background-color:inherit;">'&nbsp;'</span><span style="background-color:inherit;">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008200;background-color:inherit;">//获取当前日(1-31)</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;timeStr&nbsp;+=&nbsp;myDate.getHours()+<span style="color:blue;background-color:inherit;">':'</span><span style="background-color:inherit;">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008200;background-color:inherit;">//获取当前小时数(0-23)</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;timeStr&nbsp;+=&nbsp;myDate.getMinutes()+<span style="color:blue;background-color:inherit;">':'</span><span style="background-color:inherit;">;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:#008200;background-color:inherit;">//获取当前分钟数(0-59)</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;timeStr&nbsp;+=&nbsp;myDate.getSeconds();&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;background-color:inherit;">//获取当前秒数(0-59)</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">return</span><span style="background-color:inherit;">&nbsp;timeStr&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">$(document).ready(<span style="color:#006699;background-color:inherit;font-weight:bold;">function</span><span style="background-color:inherit;">()&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">function</span><span style="background-color:inherit;">&nbsp;loadDBTestMessage()&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$.get(<span style="color:blue;background-color:inherit;">'servlet/MysqlTestServlet'</span><span style="background-color:inherit;">,</span><span style="color:#006699;background-color:inherit;font-weight:bold;">function</span><span style="background-color:inherit;">(data)&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">if</span><span style="background-color:inherit;">&nbsp;(</span><span style="color:#006699;background-color:inherit;font-weight:bold;">typeof</span><span style="background-color:inherit;">(data)&nbsp;!=&nbsp;</span><span style="color:blue;background-color:inherit;">'object'</span><span style="background-color:inherit;">)&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;=&nbsp;eval(<span style="color:blue;background-color:inherit;">'('</span><span style="background-color:inherit;">&nbsp;+&nbsp;data&nbsp;+&nbsp;</span><span style="color:blue;background-color:inherit;">')'</span><span style="background-color:inherit;">);&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#006699;background-color:inherit;font-weight:bold;">var</span><span style="background-color:inherit;">&nbsp;html&nbsp;=&nbsp;</span><span style="color:blue;background-color:inherit;">'['</span><span style="background-color:inherit;">+showTime()+</span><span style="color:blue;background-color:inherit;">']'</span><span style="background-color:inherit;">;&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;+=&nbsp;<span style="color:blue;background-color:inherit;">'创建：'</span><span style="background-color:inherit;">&nbsp;+&nbsp;data[</span><span style="color:blue;background-color:inherit;">'createResult'</span><span style="background-color:inherit;">];&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;+=&nbsp;&nbsp;<span style="color:blue;background-color:inherit;">'插入：'</span><span style="background-color:inherit;">&nbsp;+&nbsp;data[</span><span style="color:blue;background-color:inherit;">'insertResult'</span><span style="background-color:inherit;">];&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;+=&nbsp;<span style="color:blue;background-color:inherit;">'销毁:'</span><span style="background-color:inherit;">&nbsp;+&nbsp;data[</span><span style="color:blue;background-color:inherit;">'dropResult'</span><span style="background-color:inherit;">];&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;+=&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$(<span style="color:blue;background-color:inherit;">'#message'</span><span style="background-color:inherit;">).html(html);&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;setInterval(<span style="color:#006699;background-color:inherit;font-weight:bold;">function</span><span style="background-color:inherit;">()&nbsp;{&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loadDBTestMessage();&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;10000);&nbsp;&nbsp;</span> </li> 
  <li> <span style="color:black;background-color:inherit;">});&nbsp;&nbsp;</span> </li> 
 </ol> 
</div> 
<br> 
<strong>代码片段3.1 ajax轮询</strong> 
<span style="color:#333333;font-family:Arial;font-size:14px;line-height:26px;background-color:#FFFFFF;"></span> 
<p> 这时打开http://localhost/druid-web/druid/ 地址，会看到监控界面，点击其中的sql标签。 </p> 
<p> <img src="http://static.oschina.net/uploads/img/201312/08145856_1WfO.jpg" alt=""> </p> 
<p> <strong>图3.1 监控界面查看sql查询时间</strong> </p> 
<p> <strong>注意：在写配置文件1.1时，要保证filter配置项中含有stat属性，否则这个地方看不到sql语句的监控数据。</strong> </p> 
<p> 从0.2.23开始监控界面支持中英文语言，所以这里就不翻译表格中的英文字段了。 </p> 
<p> <br> </p> 
<p> 老版本的druid的jar包中不支持通过web界面进行远程监控，从0.2.14开始可以通过配置jmx地址来获取远程运行druid的服务器的监控信息。具体配置方法如下： </p> 
<div> 
 <div> 
  <div> 
   <b>[html]</b>&nbsp; 
   <a href="http://blog.csdn.net/yunnysunny/article/details/8657095?ADUIN=188123642&amp;ADSESSION=1386485359&amp;ADTAG=CLIENT.QQ.5275_.0&amp;ADPUBNO=26274#" rel="nofollow">view plain</a> 
   <a href="http://blog.csdn.net/yunnysunny/article/details/8657095?ADUIN=188123642&amp;ADSESSION=1386485359&amp;ADTAG=CLIENT.QQ.5275_.0&amp;ADPUBNO=26274#" rel="nofollow">copy</a> 
   <div> 
   </div> 
  </div> 
 </div> 
 <ol> 
  <li> <span style="color:black;background-color:inherit;"><span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">servlet</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">servlet-name</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">DruidStatView</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;/</span><span style="color:#993300;background-color:inherit;font-weight:bold;">servlet-name</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">servlet-class</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">com.alibaba.druid.support.http.StatViewServlet</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;/</span><span style="color:#993300;background-color:inherit;font-weight:bold;">servlet-class</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">init-param</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">param-name</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">jmxUrl</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;/</span><span style="color:#993300;background-color:inherit;font-weight:bold;">param-name</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">param-value</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">service:jmx:rmi:///jndi/rmi://localhost:9004/jmxrmi</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;/</span><span style="color:#993300;background-color:inherit;font-weight:bold;">param-value</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;/</span><span style="color:#993300;background-color:inherit;font-weight:bold;">init-param</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;/</span><span style="color:#993300;background-color:inherit;font-weight:bold;">servlet</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">servlet-mapping</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">servlet-name</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">DruidStatView</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;/</span><span style="color:#993300;background-color:inherit;font-weight:bold;">servlet-name</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;</span><span style="color:#993300;background-color:inherit;font-weight:bold;">url-pattern</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">/druid/*</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;/</span><span style="color:#993300;background-color:inherit;font-weight:bold;">url-pattern</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
  <li> <span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#993300;background-color:inherit;font-weight:bold;">&lt;/</span><span style="color:#993300;background-color:inherit;font-weight:bold;">servlet-mapping</span><span style="color:#993300;background-color:inherit;font-weight:bold;">&gt;</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span> </li> 
 </ol> 
</div> 
<span style="color:#333333;font-family:Arial;font-size:14px;line-height:26px;background-color:#FFFFFF;">配置文件3.2 远程监控web</span> 
<p> 这里连接的配置参数中多了一个jmxUrl，里面配置一个jmx连接地址，如果配置了这个init-param后，那么当前web监控界面监控的就不是本机的druid的使用情况，而是jmxUrl中指定的ip的远程机器的druid使用情况。jmx连接中也可以指定用户名、密码，在上面的servlet中添加两个init-param，其param-name分别为jmxUsername和jmxPassword，分别对应连接jmx的用户名和密码。对于jmx在服务器端的配置，可以参考3.2节中的介绍。 </p> 
<span id="OSC_h3_7"></span>
<h3> <a name="t6" rel="nofollow"></a>3.2 jconsole监控 </h3> 
<p> 同时druid提供了jconsole监控的功能，因为界面做的不是很好，所以官方中没有对其的相关介绍。如果是纯java程序的话，可以简单的使用jconsole，也可以使用3.1中提到的通过配置init-param来访问远程druid。下面依然使用的是刚才用的web项目来模拟druid所在的远程机器。 </p> 
<p> 现在假设有两台机器，一台是运行druid的A机器，一台是要查看druid运行信息的B机器。 </p> 
<p> 首先在这台远程机器A的catalina.bat（或者catalina.sh）中加入java的启动选项，放置于<span style="background-color:#CCCCCC;">if "%OS%" == "Windows_NT" setlocal</span>这句之后。 </p> 
<p> <span style="background-color:#CCCCCC;">set JAVA_OPTS=%JAVA_OPTS% -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port="9004" -Dcom.sun.management.jmxremote.authenticate="false" -Dcom.sun.management.jmxremote.ssl="false"</span> </p> 
<p> 保存完之后，启动startup.bat(或者startup.sh)来运行tomcat（上面设置java启动项的配置，按理来说在eclipse中也能适用，但是笔者在其下没有试验成功）。然后在要查看监控信息的某台电脑B的命令行中运行如下命令 </p> 
<p> <span style="background-color:#CCCCCC;">jconsole -pluginpath E:\kuaipan\workspace6\druid-web\WebRoot\WEB-INF\lib\druid-0.2.11.jar</span> </p> 
<p> 这里的最后一个参数就是你的druid的jar包的路径。 </p> 
<p> <img src="http://static.oschina.net/uploads/img/201312/08145857_09U3.jpg" alt=""> </p> 
<p> <strong>图3.2 jconsole连接界面</strong> </p> 
<p> 在远程进程的输入框里面输入ip:端口号，然后点击连接（上面的配置中没有指定用户名、密码，所以这里不用填写）。打开的界面如下： </p> 
<p> <img src="http://static.oschina.net/uploads/img/201312/08145857_g8yA.jpg" alt=""> </p> 
<p> <strong>图3.3 jconsole 连接成功界面</strong> </p> 
<p> 可以看到和web监控界面类似的数据了。推荐直接使用web界面配置jmx地址方式来访问远程机器的druid使用情况，因为这种方式查看到的数据信息更全面些。 </p> 
<span id="OSC_h2_8"></span>
<h2> <a name="t7" rel="nofollow"></a><span style="font-family:'Microsoft YaHei';">参考</span> </h2> 
<div> 
 <span style="font-family:'Microsoft YaHei';"><br> </span> 
</div> 
<div>
  可以访问 
 <a target="_blank" href="http://git.oschina.net/yunnysunny/druid-demo" rel="nofollow">http://git.oschina.net/yunnysunny/druid-demo</a>&nbsp;来获取git版本库中的最新代码。 
</div> 
<div> 
 <br> 
</div> 
<div>
  oschina 问答社区： 
 <a target="_blank" href="http://www.oschina.net/p/druid" rel="nofollow">&nbsp;http://www.oschina.net/p/druid</a> 
</div></div>
      	        	      	<div class='BlogShare'>
    	
		<strong>分享到：</strong>
		<a class="share_sina" title="分享到新浪微博" href="javascript:void((function(s,d,e,r,l,p,t,z,c){var%20f='http://v.t.sina.com.cn/share/share.php?appkey=858381728',u=z||d.location,p=['&url=',e(u),'&title=',e(t||d.title),'&source=',e(r),'&sourceUrl=',e(l),'&content=',c||'gb2312','&pic=',e(p||'')].join('');function%20a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=440,height=430,left=',(s.width-440)/2,',top=',(s.height-430)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent))setTimeout(a,0);else%20a();})(screen,document,encodeURIComponent,'','','','druid简单教程: java程序很大一部分要操作数据库，为了提高性能操作数据库的时候，有不得不使用数据库连接池。数据库连接池有很多选择，c3p、dhcp、proxool等，druid作为一名后起之秀，...','','utf-8'));">
			<img src="/img/sinaweibo_fb1.png?t=1399607812000" height="29">
		</a>
		<a class="share_qq" title="分享到腾讯微博" href="javascript:(function(){window.open('http://v.t.qq.com/share/share.php?url='+encodeURIComponent(document.location)+'&amp;appkey=96f54f97c4de46e393c4835a266207f4&amp;site=&amp;title='+encodeURIComponent(document.title)+encodeURIComponent(': java程序很大一部分要操作数据库，为了提高性能操作数据库的时候，有不得不使用数据库连接池。数据库连接池有很多选择，c3p、dhcp、proxool等，druid作为一名后起之秀，...'),'', 'width=450, height=400, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no');}())">
			<img src="/img/tencent_weibo_fb.jpg?t=1399607782000" height="30">
		</a>
    	<span class='BlogVote' onclick="vote(182470)" title="都有2个人赞过了，你也来赞一下吧！不会扣积分哦！">
			<span class="num vote_count" >2</span><span class="vote" >赞</span>
		</span>
	</div>

      <div class='BlogCopyright'>
	  		原文地址：<a href="http://blog.csdn.net/yunnysunny/article/details/8657095?ADUIN=188123642&ADSESSION=1386485359&ADTA..." target="_blank">http://blog.csdn.net/yunnysunny/article/details/8657095?ADUIN=188123642&ADSESSION=1386485359&ADTA...</a>
	  	  </div>
	  
      <div class='BlogLinks'>
    	<ul>
                <li class='prev'><a href="http://my.oschina.net/u/1157906/blog/182307" title="上一篇：解决 maven 打包后无本地jar">&laquo; 上一篇</a></li>        <li class='next'><a href="http://my.oschina.net/u/1157906/blog/182656" title="下一篇：Struts2拦截器中取Action的参数">下一篇 &raquo;</a></li>    	</ul>
      </div>
	</div>
	       <div style='margin:10px 0;'>
    	<script type="text/javascript" src="http://www.oschina.net/ads/blog"></script>
      </div>
      </div>
<div class="recruitment recruitment-blog" style="margin-top:20px;height:200px">
	<div class="recruit-heading">
		<div class="title">
			最新热门职位
		</div>
		<div class="more">
			更多开发者职位上
			<a href="http://job.oschina.net/" target="_blank" class="link">开源中国·招聘</a>
		</div>
	</div>
	<div class="recruit-body">
		<ul>
									<li>
				<div class="logo-img">
					<a href="http://job.oschina.net/position/6862_1461593_21453" target="_blank">
										<span>九
</span>
										</a>
				</div>
				<div class="info-list">
					<div>
						<a href="http://job.oschina.net/position/6862_1461593_21453" target="_blank">	HTML5开发怪杰
</a>
						<a href="http://job.oschina.net/company/1461593_6862" target="_blank">
							<small>九州雅讯
</small>
						</a>
					</div>
					<h5>
						月薪：
						<span class="font-red">5-10K</span>
					</h5>
				</div>
			</li>
												<li>
				<div class="logo-img">
					<a href="http://job.oschina.net/position/8745_2438723_21717" target="_blank">
										<img src="http://static.oschina.net/uploads/company/logo/201508/20190133_do1b2438723.jpeg">
										</a>
				</div>
				<div class="info-list">
					<div>
						<a href="http://job.oschina.net/position/8745_2438723_21717" target="_blank">	安全工程师-支付产品技...
</a>
						<a href="http://job.oschina.net/company/2438723_8745" target="_blank">
							<small>京东金融
</small>
						</a>
					</div>
					<h5>
						月薪：
						<span class="font-red">13-20K</span>
					</h5>
				</div>
			</li>
												<li>
				<div class="logo-img">
					<a href="http://job.oschina.net/position/8477_2420928_21753" target="_blank">
										<span>海
</span>
										</a>
				</div>
				<div class="info-list">
					<div>
						<a href="http://job.oschina.net/position/8477_2420928_21753" target="_blank">	html5开发
</a>
						<a href="http://job.oschina.net/company/2420928_8477" target="_blank">
							<small>海同科技
</small>
						</a>
					</div>
					<h5>
						月薪：
						<span class="font-red">13-23K</span>
					</h5>
				</div>
			</li>
												<li>
				<div class="logo-img">
					<a href="http://job.oschina.net/position/9730_641426_21771" target="_blank">
										<span>福
</span>
										</a>
				</div>
				<div class="info-list">
					<div>
						<a href="http://job.oschina.net/position/9730_641426_21771" target="_blank">	Java软件工程师
</a>
						<a href="http://job.oschina.net/company/641426_9730" target="_blank">
							<small>福州九思
</small>
						</a>
					</div>
					<h5>
						月薪：
						<span class="font-red">6-12K</span>
					</h5>
				</div>
			</li>
								</ul>
	</div>
	<div class="clear"></div>
</div>
<style>
	/*招聘广告位--样式*/
	.clear{
		clear:both;
		font-size:1px;
		line-height: 0;
	}
	.recruitment{
		font-size: 14px;
		border:1px solid #eee;
		color: #333;
		margin: 20px 0 0 230px;
		border: 1px solid #eee;
		background: #fff;
		word-wrap: break-word;
	}
	.recruitment a{
			text-decoration: none;
			color: #333;
		}
		.recruitment a:hover{
			text-decoration: none;
			color: #459120;
		}
		.recruitment ul,.recruitment li{
			list-style-type: none;
			padding:0;
			margin:0;
		}
		.recruitment h5{
			font-weight: 400;
			font-size: 12px;
			color: #999;
			margin:0;
		}
		.recruitment .recruit-heading{
			height: 34px;
			line-height: 34px;
			border-bottom:1px solid #ddd;
			margin-bottom: 10px;
		}
		.recruitment .recruit-heading .title{
			float:left;
		}
		.recruitment .recruit-heading .more{
			float:right;
		}
		.recruitment .recruit-heading .link{
			font-size: 12px;
			font-weight: bold;
		}
		.recruitment .recruit-body{
		}
		.recruitment .recruit-body li{
			outline: 0;
			padding:10px 0;
			width: 50%;
			/*width: -webkit-calc(50% - 4px);
			width: -moz-calc(50% - 4px);
			width: calc(50% - 4px);
			display:inline-block;*/
			height: 50px;
			margin:0;
			float: left;
		}
		.recruitment .recruit-body li .logo-img{
			float: left;
			width: 44px;
			height: 44px;
			display: inline-block;
			padding: 2px;
			border:1px solid #ccc;
		}
		.recruitment .recruit-body li .logo-img img{
			width: 44px;
			height: 44px;
		}
		.recruitment .recruit-body li .logo-img span{
			display: block;
			font-weight: 700;
			height: 44px;
			line-height: 44px;
			font-size: 20px;
			text-align: center;
			border-radius: 5px;
		}
		.recruitment .recruit-body li .info-list{
			margin-left:60px;
		}
		.recruitment .recruit-body li .info-list div{
			line-height: 30px;
		}
		.recruitment .recruit-body li .info-list div a{
			margin-right:10px;
		}
		.recruitment .recruit-body li .info-list small{
			color: #666;
		}
		.recruitment .font-red{
			color: #EB6000 !important;
		}
		.recruitment-blog{
			margin-top:20px;
			border:1px solid #eee;
		}
		.recruitment-blog .recruit-heading{
			padding-top:10px;
			margin-left:20px;
			margin-right:20px;
		}
		.recruitment-blog .recruit-heading .title{
			font-size:16px;
		}
		.recruitment-blog .recruit-body{
			margin:0 20px;
		}
</style>
<!-------------------------------------------------------->
<script type="text/javascript">
    angular.module('blogComment', ['ngSanitize'])
	.directive('onFinishRender',function($timeout){
       return{
           restrict : 'A',
		   link:function(scope,element,attr){
               if(scope.$last){
				   $timeout(function(){
                       scope.$emit('ngRepeatFinished');
				   });
               }
		   }
       }
    })
    .controller('ListComment',function($scope, $http,$filter){
        var url = "/action/blog/listComment?blog=182470&page=1&size=10";
            $http({method: 'GET', url: url}).success(function(data) {
				$scope.commentjsons = data;
			});
            $scope.totalComment = 2;
            $scope.currentPage=1;
            $scope.pageSize=10;
            $scope.totalPage=Math.ceil($scope.totalComment/$scope.pageSize);
            if($scope.currentPage>3){
            	$scope.beginIndex = $scope.currentPage - 3;
            }else{
            	$scope.beginIndex = 1;
            }
            $scope.endIndex = $scope.beginIndex + 9;
            if($scope.endIndex>$scope.totalPage){
            	$scope.endIndex = $scope.totalPage;
            }
			var pages = new Array();
			var index=0;
			for(var i=$scope.beginIndex;i<=$scope.endIndex;i++){
				pages[index]=i;
				index++;
			}
			$scope.pages = pages;
            $scope.delete_c = function(nid,uid,cid){
                delete_c(nid,uid,cid);
            };
                $scope.ReplyInline = function(blog,user,relpy){
            ReplyInline(blog,user,relpy);
            };

            $scope.$on('ngRepeatFinished',function(ngRepeatFinishedEvent){
                var whref = window.location.href;
                if(whref && whref.indexOf('#')>0){
                    var goto = whref.substring(whref.indexOf('#'),whref.length);
                    if(goto && goto !== whref){window.location=goto;}
                }
            })
	});
</script>
<div class='SpaceList' style='margin-top:20px;' ng-app="blogComment" ng-controller="ListComment" ng-cloak>
<div class='BlogComments'>
  <h2><a name="comments"></a>评论<em ng-bind="totalComment"></em></h2>
  <ul id="BlogComments">
      <li ng-repeat="commentjson in commentjsons"
    id='cmt_{{commentjson.blogId}}_{{commentjson.userId}}_{{commentjson.commentId}}'
    ng-class="{'even': {{($index+1)%2}} == 0}" on-finish-render="ngRepeatFinished">
    <table class='ostable'>
        <tr>
            <td class='portrait'>
                <a ng-href="http://my.oschina.net/u/{{commentjson.userId}}" target="_blank">
                    <img ng-src="{{commentjson.portrait}}" align="absmiddle" title="{{ commentjson.userName }}"
                         class="SmallPortrait" user="{{ commentjson.userId }}"/>
                </a>
            </td>
            <td class='body'>
                <div class='title'>
                    <span ng-bind="(currentPage-1)*pageSize+$index+1"></span>楼：<a
                        ng-href="http://my.oschina.net/u/{{commentjson.userId}}" target="_blank"
                        name="{{ commentjson.blogId }}" class="user" ng-bind="commentjson.userName"></a>
                    <span ng-if="(commentjson.client_type>10000 && commentjson.appApproved)">(<a
                            href="{{commentjson.appUrl}}" target="_blank"
                            title="{{commentjson.appTitle}} - {{commentjson.appDescription}}"
                            ng-bind="commentjson.appTitle"></a>)</span>
				<span ng-switch="{{commentjson.client_type}}">
					<span ng-if="(commentjson.client_type==2)" ">手机</span>
                    <span ng-if="(commentjson.client_type==3)" ">Android</span>
                    <span ng-if="(commentjson.client_type==4)" ">iPhone</span>
                    <span ng-if="(commentjson.client_type==5)" ">Windows Phone</span>
                    <span ng-if="(commentjson.client_type==6)" ">微信</span>
                    </span>
                    发表于 <span ng-bind="commentjson.create_time"></span>
                    <a href="" ng-click="delete_c(commentjson.blogId, commentjson.userId, commentjson.commentId)"
                       ng-if="commentjson.canAdmin">删除</a>
                    <a name='rpl_{{commentjson.commentId}}' href="javascript:;" target="_self"
                       ng-click="ReplyInline(commentjson.blogId, commentjson.userId, commentjson.commentId)"
                       ng-if="commentjson.canCommit">回复此评论</a>
                </div>
                <div class='post' ng-bind-html="commentjson.content"></div>
                <div id='inline_reply_of_{{commentjson.blogId}}_{{commentjson.userId}}_{{commentjson.commentId}}'
                     class='inline_reply'></div>
            </td>
        </tr>
    </table>
</li>  </ul>
</div>

<ul class="pager">
<li class='page prev' ng-if="(currentPage>1)"><a href="?p={{currentPage-1}}#comments">&lt;</a></li><li class='page' ng-if="(beginIndex>1)"><a href="?p=1#comments">1</a></li><li class='page' ng-if="totalPage>1" ng-class="{current:{{currentPage==page}}}" ng-repeat="page in pages"><a href="?p={{page}}#comments" ng-bind="page"></a></li><li class='page' ng-if="(endIndex<totalPage)"><a href="?p={{totalPage}}#comments" ng-bind="(totalPage)"></a></li><li class='page next' ng-if="(currentPage<totalPage)"><a href="?p={{currentPage+1}}#comments">&gt;</a></li></ul>
</div>
<!-------------------------------------------------------->


<div id='inline_reply_editor' style='display:none;'>
<div class="BlogCommentForm">
	<form id="form_inline_comment" action="/action/blog/add_comment?blog=182470" method="POST">
	  <input type='hidden' id='inline_reply_id' name='reply_id' value=''/>
      <textarea name="content" id="ccom_content" style="width:650px;height:60px;" onkeydown="if((event.metaKey || event.ctrlKey)&&event.keyCode==13){$('#form_inline_comment').submit();}"></textarea><br/>
	  <p>
		  <span style="float:right;">
    	  <input type="button" value="关闭" class="blg_submit_btn" id='btn_close_inline_reply' style="background: rgba(255,255,255,0);color: #555;"/>
    	  <input type="submit" value="回复" id="btn_comment" class="blg_submit_btn"/> 
		  </span>
		  插入：
				<a href="javascript:;" onclick="javascript:insert_emotions('ccom_content',this);" class="blog_emotion">表情</a>
				<a href="javascript:insert_projects_c();" class="blog_soft">开源软件</a>
		 <span class="NoData" id="ficmp_msg" style="color:#F00"></span>
	  </p>
    </form>
</div>
</div>

<div class='SpaceList' style='margin-top:20px;'>
  <a name="comments" id="postform"></a>
      <div class="BlogCommentForm">
        <form id="form_comment" action="/action/blog/add_comment?blog=182470" method="POST">
        	<div class="comment_portrait">
        		<img src="/img/portrait.gif?t=1399607780000" align="absmiddle" alt="Java编程思想" title="Java编程思想" class="LargePortrait"/>        	</div>
        	<div class="comment_form">
        		<textarea name="content" id="wmd-input" style="width:650px;height:80px;" placeholder=""></textarea>
				<p>
					<button type="submit" class="blg_submit_btn" style="float:right;">发表评论</button>
					插入：
					<a href="javascript:insert_emotions();" class="blog_emotion">表情</a>
					<a href="javascript:insert_projects();" class="blog_soft">开源软件</a>
					<span class="NoData" id="cmt_tip"></span>
				</p>
				<div id="TweetFormPopupWraper">
					<div id="TweetFormPopupArrow">
        				<div id="TweetFormPopup">
                        	<div id='TweetEmotions'>
                            	<div class='TweetPopupTitle'><a href="javascript:;" onclick="$('#TweetFormPopupWraper').hide();return false;">关闭</a>插入表情</div>
                            	                            	<a href='javascript:;' onclick='return ins_e(0);' class='emotion' style='background-position: -0px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(1);' class='emotion' style='background-position: -24px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(2);' class='emotion' style='background-position: -48px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(3);' class='emotion' style='background-position: -72px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(4);' class='emotion' style='background-position: -96px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(5);' class='emotion' style='background-position: -120px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(6);' class='emotion' style='background-position: -144px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(7);' class='emotion' style='background-position: -168px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(8);' class='emotion' style='background-position: -192px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(9);' class='emotion' style='background-position: -216px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(10);' class='emotion' style='background-position: -240px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(11);' class='emotion' style='background-position: -264px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(12);' class='emotion' style='background-position: -288px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(13);' class='emotion' style='background-position: -312px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(14);' class='emotion' style='background-position: -336px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(15);' class='emotion' style='background-position: -360px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(16);' class='emotion' style='background-position: -384px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(17);' class='emotion' style='background-position: -408px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(18);' class='emotion' style='background-position: -432px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(19);' class='emotion' style='background-position: -456px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(20);' class='emotion' style='background-position: -480px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(21);' class='emotion' style='background-position: -504px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(22);' class='emotion' style='background-position: -528px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(23);' class='emotion' style='background-position: -552px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(24);' class='emotion' style='background-position: -576px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(25);' class='emotion' style='background-position: -600px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(26);' class='emotion' style='background-position: -624px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(27);' class='emotion' style='background-position: -648px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(28);' class='emotion' style='background-position: -672px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(29);' class='emotion' style='background-position: -696px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(30);' class='emotion' style='background-position: -720px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(31);' class='emotion' style='background-position: -744px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(32);' class='emotion' style='background-position: -768px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(33);' class='emotion' style='background-position: -792px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(34);' class='emotion' style='background-position: -816px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(35);' class='emotion' style='background-position: -840px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(36);' class='emotion' style='background-position: -864px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(37);' class='emotion' style='background-position: -888px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(38);' class='emotion' style='background-position: -912px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(39);' class='emotion' style='background-position: -936px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(40);' class='emotion' style='background-position: -960px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(41);' class='emotion' style='background-position: -984px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(42);' class='emotion' style='background-position: -1008px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(43);' class='emotion' style='background-position: -1032px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(44);' class='emotion' style='background-position: -1056px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(45);' class='emotion' style='background-position: -1080px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(46);' class='emotion' style='background-position: -1104px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(47);' class='emotion' style='background-position: -1128px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(48);' class='emotion' style='background-position: -1152px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(49);' class='emotion' style='background-position: -1176px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(50);' class='emotion' style='background-position: -1200px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(51);' class='emotion' style='background-position: -1224px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(52);' class='emotion' style='background-position: -1248px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(53);' class='emotion' style='background-position: -1272px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(54);' class='emotion' style='background-position: -1296px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(55);' class='emotion' style='background-position: -1320px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(56);' class='emotion' style='background-position: -1344px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(57);' class='emotion' style='background-position: -1368px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(58);' class='emotion' style='background-position: -1392px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(59);' class='emotion' style='background-position: -1416px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(60);' class='emotion' style='background-position: -1440px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(61);' class='emotion' style='background-position: -1464px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(62);' class='emotion' style='background-position: -1488px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(63);' class='emotion' style='background-position: -1512px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(64);' class='emotion' style='background-position: -1536px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(65);' class='emotion' style='background-position: -1560px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(66);' class='emotion' style='background-position: -1584px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(67);' class='emotion' style='background-position: -1608px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(68);' class='emotion' style='background-position: -1632px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(69);' class='emotion' style='background-position: -1656px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(70);' class='emotion' style='background-position: -1680px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(71);' class='emotion' style='background-position: -1704px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(72);' class='emotion' style='background-position: -1728px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(73);' class='emotion' style='background-position: -1752px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(74);' class='emotion' style='background-position: -1776px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(75);' class='emotion' style='background-position: -1800px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(76);' class='emotion' style='background-position: -1824px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(77);' class='emotion' style='background-position: -1848px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(78);' class='emotion' style='background-position: -1872px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(79);' class='emotion' style='background-position: -1896px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(80);' class='emotion' style='background-position: -1920px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(81);' class='emotion' style='background-position: -1944px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(82);' class='emotion' style='background-position: -1968px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(83);' class='emotion' style='background-position: -1992px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(84);' class='emotion' style='background-position: -2016px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(85);' class='emotion' style='background-position: -2040px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(86);' class='emotion' style='background-position: -2064px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(87);' class='emotion' style='background-position: -2088px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(88);' class='emotion' style='background-position: -2112px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(89);' class='emotion' style='background-position: -2136px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(90);' class='emotion' style='background-position: -2160px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(91);' class='emotion' style='background-position: -2184px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(92);' class='emotion' style='background-position: -2208px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(93);' class='emotion' style='background-position: -2232px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(94);' class='emotion' style='background-position: -2256px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(95);' class='emotion' style='background-position: -2280px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(96);' class='emotion' style='background-position: -2304px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(97);' class='emotion' style='background-position: -2328px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(98);' class='emotion' style='background-position: -2352px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(99);' class='emotion' style='background-position: -2376px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(100);' class='emotion' style='background-position: -2400px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(101);' class='emotion' style='background-position: -2424px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(102);' class='emotion' style='background-position: -2448px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(103);' class='emotion' style='background-position: -2472px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(104);' class='emotion' style='background-position: -2496px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(105);' class='emotion' style='background-position: -2520px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(106);' class='emotion' style='background-position: -2544px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(107);' class='emotion' style='background-position: -2568px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(108);' class='emotion' style='background-position: -2592px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(109);' class='emotion' style='background-position: -2616px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(110);' class='emotion' style='background-position: -2640px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(111);' class='emotion' style='background-position: -2664px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(112);' class='emotion' style='background-position: -2688px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(113);' class='emotion' style='background-position: -2712px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(114);' class='emotion' style='background-position: -2736px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(115);' class='emotion' style='background-position: -2760px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(116);' class='emotion' style='background-position: -2784px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(117);' class='emotion' style='background-position: -2808px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(118);' class='emotion' style='background-position: -2832px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(119);' class='emotion' style='background-position: -2856px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(120);' class='emotion' style='background-position: -2880px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(121);' class='emotion' style='background-position: -2904px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(122);' class='emotion' style='background-position: -2928px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(123);' class='emotion' style='background-position: -2952px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(124);' class='emotion' style='background-position: -2976px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(125);' class='emotion' style='background-position: -3000px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(126);' class='emotion' style='background-position: -3024px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(127);' class='emotion' style='background-position: -3048px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(128);' class='emotion' style='background-position: -3072px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(129);' class='emotion' style='background-position: -3096px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(130);' class='emotion' style='background-position: -3120px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(131);' class='emotion' style='background-position: -3144px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(132);' class='emotion' style='background-position: -3168px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(133);' class='emotion' style='background-position: -3192px 0px;'></a>
                            	                            	<a href='javascript:;' onclick='return ins_e(134);' class='emotion' style='background-position: -3216px 0px;'></a>
                            	                            	<div class='clear'></div>
                        	</div>
        				</div>
					</div>
				</div>
            </div>
        </form>
    </div>
  </div>
<div id="RelativeBlogs">
	<strong><a id='btn_close'>关闭</a>相关文章阅读</strong>
	<ul>
			<li>
		<span class='date'>2012/12/14</span>
		<a href="http://my.oschina.net/hanzhankang/blog/95772" title="最简单的Druid使用方式">最简单的Druid使用方式</a>
	</li>
				<li>
		<span class='date'>2015/05/26</span>
		<a href="http://my.oschina.net/u/1585857/blog/419983" title="Playmaker全面实践教程之简单的使用Playmaker示例">Playmaker全面实践教程之简单的使用...</a>
	</li>
				<li>
		<span class='date'>2015/07/30</span>
		<a href="http://my.oschina.net/u/2421672/blog/485653" title="阿里巴巴开源项目 Druid ">阿里巴巴开源项目 Druid </a>
	</li>
				<li>
		<span class='date'>2012/12/06</span>
		<a href="http://my.oschina.net/changsheng/blog/142874" title="Druid数据库连接池使用示例">Druid数据库连接池使用示例</a>
	</li>
				<li>
		<span class='date'>2014/12/20</span>
		<a href="http://my.oschina.net/liting/blog/358579" title=" druid简单教程"> druid简单教程</a>
	</li>
			</ul>
</div>
<script type="text/javascript" src="/action/visit/blog?id=182470" defer="defer"></script>

<script type="text/javascript" src="/js/sh309/scripts/xregexp-min.js?t=1423294217000"></script>
<script type="text/javascript" src="/js/sh309/scripts/shCore.min.js?t=1423294217000"></script>
<script type="text/javascript" src="/js/sh309/scripts/shAutoloader.js?t=1423294217000"></script>
<link type="text/css" rel="stylesheet" href="/js/sh309/styles/shCore.css?t=1423294217000"/>
<link type="text/css" rel="Stylesheet" href="/js/sh309/styles/shThemeDefault.css?t=1423294217000"/>

<script type="text/javascript">
    SyntaxHighlighter.autoloader(
            'applescript			/js/sh309/scripts/shBrushAppleScript.js?t=1423294217000',
            'actionscript3 as3		/js/sh309/scripts/shBrushAS3.js?t=1423294217000',
            'bash shell				/js/sh309/scripts/shBrushBash.js?t=1423294217000',
            'coldfusion cf			/js/sh309/scripts/shBrushColdFusion.js?t=1423294217000',
            'cpp c					/js/sh309/scripts/shBrushCpp.js?t=1423294217000',
            'obj-c objc				/js/sh309/scripts/shBrushObjC.js?t=1423294217000',
            'c# c-sharp csharp		/js/sh309/scripts/shBrushCSharp.js?t=1423294217000',
            'css					/js/sh309/scripts/shBrushCss.js?t=1423294217000',
            'delphi pascal			/js/sh309/scripts/shBrushDelphi.js?t=1423294217000',
            'diff patch pas			/js/sh309/scripts/shBrushDiff.js?t=1423294217000',
            'erl erlang				/js/sh309/scripts/shBrushErlang.js?t=1423294217000',
            'groovy					/js/sh309/scripts/shBrushGroovy.js?t=1423294217000',
            'haxe hx				/js/sh309/scripts/shBrushHaxe.js?t=1423294217000',
            'java					/js/sh309/scripts/shBrushJava.js?t=1423294217000',
            'jfx javafx				/js/sh309/scripts/shBrushJavaFX.js?t=1423294217000',
            'js jscript javascript	/js/sh309/scripts/shBrushJScript.js?t=1423294217000',
            'perl pl				/js/sh309/scripts/shBrushPerl.js?t=1423294217000',
            'php					/js/sh309/scripts/shBrushPhp.js?t=1423294217000',
            'text plain				/js/sh309/scripts/shBrushPlain.js?t=1423294217000',
            'py python				/js/sh309/scripts/shBrushPython.js?t=1423294217000',
            'ruby rails ror rb		/js/sh309/scripts/shBrushRuby.js?t=1423294217000',
            'scala					/js/sh309/scripts/shBrushScala.js?t=1423294217000',
            'sql					/js/sh309/scripts/shBrushSql.js?t=1423294217000',
            'vb vbnet				/js/sh309/scripts/shBrushVb.js?t=1423294217000',
            'xml xhtml xslt html	/js/sh309/scripts/shBrushXml.js?t=1423294217000'
    );
    SyntaxHighlighter.all();
</script>
<!--[if lt IE 7]>
<script type="text/javascript" src="/js/minmax.js?t=1399607773000"></script>
<![endif]-->
<script type='text/javascript'>
<!--
var posting = false;
var upprev_closed = false;
var upprev_hidden = true;

$(document).ready(function(){
				
    $('.BlogContent img').css('cursor','pointer');
    jQuery.each($('.BlogContent img'),function(idx,v){
    	$(v).wrap("<a href='"+$(this).attr('src')+"' target='_blank'></a>");
    });
	$('#form_comment').ajaxForm({
		dataType: 'json',
		bforeSubmit: function(){
			posting = true;
		},
		success: function(json) {
        	if(json.msg){
				///alert(json.msg);
				$('#cmt_tip').html("<span style='color:#C00;'>"+json.msg+"</span>");
				$('#wmd-input').focus();
			}else{
				var url = "http://my.oschina.net/u/1157906/blog_post?_cmt_blog="+json.blog+"&_cmt_user="+json.user+"&_cmt_id="+json.id;
        		jQuery.get(url, function(data){
    				$('#form_comment .NoData').hide();
        			$('ul#BlogComments').append(data);
        			$('#form_comment').resetForm();
        		});
			}
		}
	});

    var at_datas = [];
    $('img.SmallPortrait').each(function(){
        var name = $(this).attr('alt');
        if(jQuery.inArray(name, at_datas) < 0 && name != '${g_user.name}')
            at_datas.push(name);
    });
    $("#form_comment textarea").atWho("@", {data: at_datas});
	$("#form_comment textarea").on("keydown",function(event){
		if((event.metaKey || event.ctrlKey) && event.keyCode==13){
			$("#form_comment").submit();
		}
	});
	$("#submiting").ajaxStart(function(){
	   if(posting){
    	   $('#btn_submit').attr("disabled","disabled");
           $(this).show();
	   }
    });
	$("#submiting").ajaxComplete(function(event,request, settings){
	   if(posting){
           $(this).hide();
    	   $('#btn_submit').attr("disabled","");
	   }
	   posting = false;
    });

    $(window).scroll(function() {
        var lastScreen;
        if ($("#postform").length > 0)
            lastScreen = getScrollY() + $(window).height() < $("#postform").offset().top * 1 ? false : true;
        else
            lastScreen = getScrollY() + $(window).height() < $(document).height() * 1 ? false : true;
        if (lastScreen && !upprev_closed) {
            $("#RelativeBlogs").stop().animate({right:"0px"});
            upprev_hidden = false;
        }
        else if (upprev_closed && getScrollY() == 0) {
            upprev_closed = false;
        }
        else if (!upprev_hidden) {
            upprev_hidden = true;
            $("#RelativeBlogs").stop().animate({right:"-400px"});
        }
    });
    $("#RelativeBlogs #btn_close").click(function() {
        $("#RelativeBlogs").stop().animate({right:"-400px"});
        upprev_closed = true;
        upprev_hidden = true;
    });
});
function delete_c(nid,uid,cid){
  if(confirm("您确认要删除此篇评论？")){
    var args = "cmt="+cid+"#"+uid+"#"+nid;
    ajax_post("/action/blog/delete_blog_comments?space=1157906",args,function(){$("#cmt_"+nid+"_"+uid+"_"+cid).fadeOut();});
  }
}
var replyinline_dup = false;
function ReplyInline(blog,user,reply){
	$('.inline_reply').empty();
	var div_id = '#inline_reply_of_'+blog+'_'+user+'_'+reply;
	$('#inline_reply_id').val(user+'_'+reply);
	$(div_id).html($('#inline_reply_editor').html());
	$('#ccom_content').focus();
	$('#btn_close_inline_reply').click(function(){
		$(div_id).empty();
	});
	var li_id = '#cmt_'+blog+'_'+user+'_'+reply;
	var p_li = $(li_id);
	var tip = $("#ficmp_msg");
	$('#form_inline_comment').ajaxForm({
		dataType: 'json',
		beforeSubmit:function(){
			if(replyinline_dup){
			    tip.html("正在发表评论，请勿重复提交");
				return false;
			}
			replyinline_dup = true;
			return true;
		},
    	success: function(json) {
			tip.html("");
        	if(json.msg){
				tip.html(json.msg);
				replyinline_dup = false;
        	}
        	else if(json.id){
    			ajax_post("http://my.oschina.net/blog/show_post","_cmt_user="+"&_cmt_id="+json.id,function(html){
					if(html.length > 0){
						$(html).insertAfter(p_li);
						$(div_id).empty();
					}else{
						tip.html("获取评论失败");
					}
					setTimeout(function(){
    					replyinline_dup = false;
					},5000)
				});
        	}
    	}
	});
}
function edit_catalogs(qid){
	popup("/set-catalogs?parent=1&type=3&id="+qid);
}
function vote(blogid){
		alert("必须登录后才能操作 :)");
	}
function toggle_recomm(blogid){
	ajax_post("/action/blog/toggle_recomm","id="+blogid,function(html){
		if(html == '-1')
			alert("文章不存在");
		else if(html == 0){
			$('#lnk_recomm_'+blogid).removeClass('recommend');
			$('#lnk_recomm_'+blogid).text("未推荐");
		}
		else if(html == 1){
			$('#lnk_recomm_'+blogid).addClass('recommend');
			$('#lnk_recomm_'+blogid).text("已推荐");
		}
	});
}
	var textbox = $("#wmd-input").textbox({
		maxLength: 1000,
    	onInput: function(event, status) {
			var txt = jQuery.trim($("#wmd-input").val());
    	}
	});
	function insert_projects() {
		textbox.insertText('#此处输入软件名#');
		$('#TweetEmotions').removeAttr('txt_id');
	}
	function insert_projects_c() {
    	var combox = $("#ccom_content").textbox({
    		maxLength: 1000,
        	onInput: function(event, status) {
    			var txt = jQuery.trim($("#ccom_content").val());
        	}
    	});
		combox.insertText('#此处输入软件名#');
		$('#TweetEmotions').removeAttr('txt_id');
	}
	function insert_emotions(id,obj) {
		if(id) {
			$('#TweetEmotions').attr('txt_id',id);
			var thiz = $(obj);
			var offset = thiz.offset();
			var poffset = thiz.offsetParent().offset();
        	var left = offset.left-poffset.left;
        	var top = offset.top-poffset.top;
			$('#TweetFormPopupWraper').css({'top':top+25 +'px','left':left+'px'});
		}
		else {
			$('#TweetFormPopupWraper').css({'top':'','left':''});
			$('#TweetEmotions').removeAttr('txt_id');
		}
		$('#TweetEmotions').show();
		$('#TweetImages').hide();
		$('#TweetFormPopupArrow').removeClass('projects');
		$('#TweetFormPopupArrow').removeClass('images');
		$('#TweetFormPopupArrow').addClass('emotions');
		$('#TweetFormPopupWraper').slideDown('fast');
	}
	function ins_e(idx){
		var txt_id = $('#TweetEmotions').attr('txt_id');
		if(!txt_id)
			textbox.insertText('['+idx+']');
		else {
			insertAtCursor(txt_id,'['+idx+']');
		}
		$('#TweetFormPopupWraper').hide();
		return false;
	}
	function insertAtCursor(tbid,str) {
		var tb = document.getElementById(tbid);
        if (document.selection){
			tb.focus();
			var r = document.selection.createRange();
            document.selection.empty();
            r.text = str;
            r.collapse();
            r.select();
        }
        else{
            var newstart = tb.selectionStart+str.length;
            tb.value=tb.value.substr(0,tb.selectionStart)+str+tb.value.substring(tb.selectionEnd);
            tb.selectionStart = newstart;
            tb.selectionEnd = newstart;
        }
	}
//-->
</script>                </div>
	<div class='clear'></div>
	<div id="OSC_Footer"><style>
.oscapp {text-align:left; width:220px;}
.oscapp span {float:left;width:140px;}
.oscapp a {float:left;text-indent:-9999em;width:16px;margin-left:8px;}
.oscapp a.android {background:url('/img/android.gif') no-repeat left center;}
.oscapp a.iphone {background:url('/img/iphone.gif') no-repeat left center;}
.oscapp a.wp7 {background:url('/img/wp7.gif') no-repeat left center;}
</style>
<table width='100%'><tr>
<td align='left'>&copy; 开源中国(OSChina.NET) | <a href="http://www.oschina.net/home/aboutosc">关于我们</a> | <a href="mailto:market@oschina.cn">广告联系</a> | <a href="http://weibo.com/oschina2010" target="_blank">@新浪微博</a> | <a href="http://m.oschina.net/">开源中国手机版</a> | <a href='http://www.miitbeian.gov.cn/' target='_blank' style='color:#737573;text-decoration:none;'>粤ICP备12009483号-3</a></td>
<td class='oscapp'>
	<span>开源中国手机客户端：</span>
	<a href="http://www.oschina.net/app" class='android' title='Android客户端'>Android</a>
	<a href="http://www.oschina.net/app" class='iphone' title='iPhone 客户端'>iPhone</a>
	<a href="http://www.oschina.net/app" class='wp7' title='Windows Phone 客户端'>WP7</a>
</td>
</tr>
<tr>
<td colspan='2' align='left'>开源中国社区(OSChina.net)是工信部 <a href='http://www.copu.org.cn/' target='_blank'>开源软件推进联盟</a> 指定的官方社区</td>
</tr>
</table>
<script type='text/javascript'>
<!--
if (top.location != self.location)top.location=self.location;
//-->
</script></div>
</div>
</body>
<style>
span.love{
	position: relative;
    min-width: 35px;
    display: inline-block;
    height: 12px;
}
span.love a{
    position: absolute;
    right: 0px;
}
</style>
<script type="text/javascript" src="/action/visit/space?id=1157906"></script>
<script type="text/javascript" src="/js/2014/ImageTool.js?t=1399607778000?20140124"></script>
<script type='text/javascript'>
<!--
$(document).ready(function() {

	SelectStyle("#search-item",".search_list");
	$('.Tweet .photo img').live("click",function(){
		var T=$(this);
		var t=this;
		var bigImg = T.attr('bi');
		var smallImg = T.attr('si');
		var src = T.attr('src');
		var newsrc = (bigImg == src)?smallImg:bigImg;
		var imgId = T.attr('id');
		if(T.parent().attr("id") == "img_container"){
			T.parent().replaceWith(T);
			T.removeAttr("style");
			T.removeAttr("width");
			T.removeAttr("height");
		}
		if(newsrc == bigImg){
    		var loading=$('<img alt="loading" src="/img/loading.gif?t=1399607812000"/>');
			var top = T.position().top+T.height()/2-8;
			var left = T.position().left+T.width()/2-8;
			loading.css({
				'position':'absolute',
				'z-index':999,
				'top':top,
				'left':left
			});
    		T.before(loading);
			var tImg=new Image();
			tImg.src=newsrc;
			tImg.onload=function(){afterImgLoad(T,loading,imgId,newsrc,bigImg);};
		}
		else{
			T.attr("src",newsrc);
			$('#img_menu_'+imgId).remove();
		}
		return false;
	});
	
	$(".tweet_thumb_wrapper").mouseenter(function(){
		$(this).find(".tweet_play_video").css("opacity",1);
	}).mouseleave(function(){
		$(this).find(".tweet_play_video").css("opacity",0.7);
	});

    $("#TForm textarea").atWho("@", function(query, callback){
        jQuery.ajax({
            type:'POST',
            url:"/action/tweet/at_suggest",
            data:{'q':query},
            dataType:'json',
            success:function(json){
                callback(json);
            }
        });
    });
	
	toggle_tweet_video = function(id){
		$("#tweet_video_thumb_"+id).toggle();
		var video = $("#tweet_video_"+id).toggle();
		video.siblings(".tweet_video_operation,.tweet_thumb_wrapper").toggle();
	};
	
	function afterImgLoad(T,loading,imgId,url,bigImg){
		var lnks = "<div id='img_menu_"+imgId+"' class='ImgMenu'>";
		lnks += "<a href='#' onclick='$(\"#"+imgId+"\").click();return false;'>收起</a>";
		lnks += "<a href='javascript:void(0);' onclick='rotate(this,\""+imgId+"\",0);' id='rotate_btn'>旋转</a>";
		lnks += "<a href='"+bigImg+"' target='_blank'>查看原图</a></div>";			
		loading.remove();
		T.attr("src",url);
		T.before(lnks);
	}
});

function set_fellow_memo(fid,fname){
	popup("/action/ajax/set_fellow_memo","friend="+fid+"&name="+fname);
}

function deleteMsgs(uid, fid, fname){
	if(!confirm("你确认要清除与‘"+fname+"’的所有私信吗？"))
		return ;
	var args = "user="+uid+"&friend="+fid;
	ajax_post("/action/msg/delete_user",args,function(html){
		if(html.length > 0)
			alert(html);
		else{
			$('#Msg_'+fid).fadeOut();
		}
	});
}

function follow_user(uid, uname){
	just_follow(uid, uname,'${g_user.id}'); //oschina.js
}

function unfollow_user(uid, uname){
	if(confirm("确定不再关注" + uname + "了吗？"))
	just_unfollow(uid,'${g_user.id}',function(){
		alert('已取消对 ' + uname + ' 的关注');
	});
}

function tweet_reply(logid){
	var r = $('#LogReply_'+logid);
	if(!r.is(":hidden")){
		close_tweet_reply(logid);
		return ;
	}
	r.html("<div class='TweetRplsWrapper'><span class='loading'>正在加载评论，请稍候...</span></div>")
	r.show();
	r.load("http://my.oschina.net/u/1157906/tweet-rpls?log="+logid,function(){
		$('#edt_tweet_post_'+logid).focus();
        var at_datas = [];
        $(this).find("img.SmallPortrait").each(function(){
            var name = $(this).attr('alt');
            if(jQuery.inArray(name, at_datas) < 0 && name != '${g_user.name}')
                at_datas.push(name);
        });
        $(this).find("input.TXT_TweetRpl_Text").atWho("@", {data: at_datas});
        $('#TweetReplyForm_'+logid).ajaxForm({
        	dataType: 'json',
			beforeSubmit: function(arr, form, options){
				$('#BTN_TweetReply_'+logid).attr('disabled','disabled');
			},
            success: function(json) {
            	if(json.msg){
        			alert(json.msg);
            	}else if(json.log){
					$('#log_reply_count_'+logid).text(json.reply_count);
        			//插入新评论					
					ajax_get("/action/ajax/get_tweet_reply?id=" + json.log,true,function(html){
						$('#LogReply_'+logid+' ul').prepend(html);
					});
					$('#edt_tweet_post_'+logid).val('');
            	}
				$('#BTN_TweetReply_'+logid).removeAttr('disabled');
            }
        });
	});
}
function close_tweet_reply(logid){
	$('#LogReply_'+logid).empty();
	$('#LogReply_'+logid).hide();
	$('#Logs .userlogs li').removeClass('hover');
}
function reply_rtweet(logid, rid, toname){
	var edtPost = $('#edt_tweet_post_' + logid);
	var old_v = edtPost.val();
	if(old_v.length > 0)
		edtPost.val(old_v + ',@'+toname+' ');
	else
		edtPost.val('回复 @'+toname+' : ');
	edtPost.focus();
	edtPost.caretPos(edtPost.val().length); }
function delete_tweet(logid){
	if(confirm("确认要删除这条信息吗？"))
	ajax_post("/action/tweet/delete?log="+logid+"&user=${g_user.id}","",function(html){
		if(html.length==0){
			var elem = $('#LI_'+logid);
			if(elem.length > 0)
				$('#LI_'+logid).fadeOut();
			else
				location.reload();
		}
	});
}
function delete_tweet_reply(logid){
	if(confirm("确认要删除这条评论吗？"))
	ajax_post("/action/tweet/delete_reply?id="+logid+"&user=${g_user.id}","",function(html){
		if(html.length > 0)
			$('#LI_'+logid).fadeOut();
	});
}

function delete_blog(blog_id){
    if(!confirm("文章删除后无法恢复，请确认是否删除此篇文章？")) return;
    ajax_post("/action/blog/delete?id="+blog_id+"&user=${g_user.id}&user_code=${g_user.activate_code}","",function(html){
    	location.href="http://my.oschina.net/u/1157906/blog";
    });
}

function SelectStyle(on,option){
	var currentSort = $(on).attr('id');
	var currentText = $(option+" li."+currentSort+" a").html();
	$(on + " .text").html(currentText);
	$(on + " .text").hover(function(){
		$(this).addClass("hover")
	},function(){
		$(this).removeClass("hover")
	});
	$(option+" li a").each(function(index){
		$(this).click(function(){
			thishtml = $(this).html();
			$(on + " .text").removeClass("on").html(thishtml);		
			$(".selectbox select ").find("option").removeAttr('selected').eq(index).attr("selected","selected");	
			$(option).hide()
			return false;
		});
		
	});		
	
	$(".selectbox").click(function(){		
		$(option).toggle();
		$(on + " .text").toggleClass("on");		
		return false;
	});
	$(document).click(function(){
		$(option).hide();	
		$(on + " .text").removeClass("on");
	});
	$(document).trigger('click');

}

//-->
//添加点赞脚本开始
function makeAsLove(obj){

	var _this = $(obj);
	var _hc = _this.hasClass('fa-thumbs-o-up');
	
	var _enable = _this.attr('data-click');
	if (_enable != undefined && 'dis' === _enable) {
	    return;
	}

	var makeAsLoveId =$(obj).attr("id");
	var temp = makeAsLoveId.split("_");
	var logid = temp[1];
	var ownerOfLog = temp[2];
	var clickCount = $("#love_"+logid+"_hidden_clickCount").val();
	var user_code = $("#love_"+logid+"_user_code").val();
	var current_love_count = $("#love_"+logid+"_hidden").val();
	$("#love_userlist_"+logid+"_hidden").val();
	
	_this.animate({
            'font-size': '20px'
        },300, function () {
            _this.attr('data-click', 'dis');
            setTimeout(function(){
                _this.attr('data-click', 'enable');
            },1000);
            setTimeout(function () {
                if (_hc) {
                    _this.removeClass('fa-thumbs-o-up');
                    _this.addClass('fa-thumbs-up');
                } else {
                    _this.removeClass('fa-thumbs-up');
                    _this.addClass('fa-thumbs-o-up');
                }
                _this.css({
                    'font-size': '14px'
                });

              $.ajax({
		            url:"/action/tweet/makeAsLove",
		            type:"POST",
		            data:{
		                logid:logid,
		                user_code:user_code,
		                current_love_count:current_love_count,
		                ownerOfLog:ownerOfLog,
		                clickCount:clickCount
		            },
		            success:function(result){
		                var dataResult =  jQuery.parseJSON(result)
		                var resultCode = dataResult.code;
		                $("#love_"+logid+"_hidden_clickCount").val(parseInt(dataResult.clickCount));
		                if(resultCode=="200"){
		                    var love = dataResult.love_count;
		                    var countOfLove = parseInt(love);
		                    $("#love_"+logid).text(countOfLove);
		                    $("#love_userlist_"+logid).text(countOfLove);
		                    var imgEle = '<a href="$link.auto_user($g_user, false)" target="_blank" id="me_'+logid+'">';
							var spanEle = '<span class="TweetUserPic"><img src="/img/portrait.gif?t=1399607780000" align="absmiddle" alt="非会员用户" title="非会员用户" class="SmallPortrait" user=""/></span></a>';
		                    $("#user_pic_"+logid).prepend(imgEle+spanEle);
		                    $("#love_"+logid).text(countOfLove);
		                    $("#love_"+logid+"_hidden").val(countOfLove);
		                    $("#love_userlist_"+logid+"hidden").val(countOfLove);
		                    $("#love_userlist_"+logid).text(countOfLove+"个人觉得很赞");
		                    //$("#"+makeAsLoveId).attr("class","loved");
		                    return;
		                }
		                if(resultCode=="201"){
		                	var love = dataResult.love_count;
			                var countOfLove = parseInt(love);
			                $("#love_userlist_"+logid).text(countOfLove);
		                    $("#me_"+logid).empty();
		                    $("#love_"+logid).text(countOfLove);
		                    $("#love_"+logid+"_hidden").val(countOfLove);
		                    if(countOfLove<=0){
		                    	$("#love_userlist_"+logid).text("");
		                    }else{
		                    	$("#love_userlist_"+logid).text(countOfLove+"个人觉得很赞");
		                    }
		                    //$("#"+makeAsLoveId).removeClass("loved");
		                    return;
		                }
		                $("#" + makeAsLoveId).attr("class", "fa fa-thumbs-o-up");
		                $("#info_"+logid).text(dataResult.result);
		                setTimeout(function(){
		                	$("#info_"+logid).text("");
		                },3000);
		            }

            }, 400);
        });
	
        });
}
</script>

<script>
	function toggle(){
		var flag= $("#hiddenflag").val();
		if(flag=="true"){
			$(".hiddenPic").hide();
			$("#hiddenflag").val(false);
		}else if(flag=="false"){
			$(".hiddenPic").show();
			$("#hiddenflag").val(true);
		}
	}
</script>
</html>

<!-- Generated by OsChina.NET (init:1[ms],page:122[ms],ip:222.222.216.162) -->